<apex:page standardController="SPE_ScoringTemplate__c" extensions="SPE_NewScoringTemplateExt,SPE_MasterDataExt" id="pgId">
    <apex:includeScript value="{!$Resource.JqueryMin}"/>
    <script>
        if ('{!scoringTemplate.Stage__c}'=='Obsolete')
        {
            alert('Obsolete SPE Template is not Editable !!!');
            window.location.href="/{!scoringTemplate.SPETemplate__c}";
        }
    </script>
    <head>
        <script>
            var prdValue = '';
            var blValue = '';
            var buValue = '';
        </script>
    </head>
    <script>

        //----------JS functions for custom picklist starts-------------------
        function populateMarketUnitJS(a){
        
           document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2AId:chooseMarketUnit').disabled='true';
           document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem33Id:chooseCountry').disabled='true';
           document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem4Id:chooseProject').disabled='true'; 
           document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem5Id:chooseBU').disabled='true';
           document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem10Id:chooseBL').disabled='true';
           
           document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem7Id:chooseProduct').disabled='true';
           document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1Id:chooseCatArea').disabled='true';
           document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2Id:chooseCatGroup').disabled='true';
           document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem3Id:chooseCategory').disabled='true';
           populateMarketUnit(a);
   
        }
        function populateMarketUnitJS1(){
    
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2AId:chooseMarketUnit').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem33Id:chooseCountry').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem4Id:chooseProject').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem5Id:chooseBU').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem10Id:chooseBL').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem7Id:chooseProduct').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1Id:chooseCatArea').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2Id:chooseCatGroup').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem3Id:chooseCategory').disabled=false;
            
    }
        function populateCountryJS(val){
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1AId:chooseMarket').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem33Id:chooseCountry').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem4Id:chooseProject').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem5Id:chooseBU').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem10Id:chooseBL').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem7Id:chooseProduct').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1Id:chooseCatArea').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2Id:chooseCatGroup').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem3Id:chooseCategory').disabled='true';
             
             populateCountry(val);
 
        }
        
        function populateCountryJS1(){
        
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1AId:chooseMarket').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem33Id:chooseCountry').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem4Id:chooseProject').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem5Id:chooseBU').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem10Id:chooseBL').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem7Id:chooseProduct').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1Id:chooseCatArea').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2Id:chooseCatGroup').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem3Id:chooseCategory').disabled=false;
  
        }
       
        
        function populatePrjJS(val){
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1AId:chooseMarket').disabled='true';
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2AId:chooseMarketUnit').disabled='true';
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem4Id:chooseProject').disabled='true';
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem5Id:chooseBU').disabled='true';
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem10Id:chooseBL').disabled='true';
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem7Id:chooseProduct').disabled='true';
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1Id:chooseCatArea').disabled='true';
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2Id:chooseCatGroup').disabled='true';
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem3Id:chooseCategory').disabled='true';
            populatePrj(val);
            
        }

        function populatePrjJS1()
        {
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1AId:chooseMarket').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2AId:chooseMarketUnit').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem4Id:chooseProject').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem5Id:chooseBU').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem10Id:chooseBL').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem7Id:chooseProduct').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1Id:chooseCatArea').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2Id:chooseCatGroup').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem3Id:chooseCategory').disabled=false;
        
        }
        function populateBLJS(val){
             buValue = val;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem10Id:chooseBL').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem7Id:chooseProduct').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1AId:chooseMarket').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2AId:chooseMarketUnit').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem4Id:chooseProject').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem33Id:chooseCountry').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1Id:chooseCatArea').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2Id:chooseCatGroup').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem3Id:chooseCategory').disabled='true';
             populateBL(val);
          }
          
        function  populateBLJS1(){
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem10Id:chooseBL').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem7Id:chooseProduct').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1AId:chooseMarket').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2AId:chooseMarketUnit').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem4Id:chooseProject').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem33Id:chooseCountry').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1Id:chooseCatArea').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2Id:chooseCatGroup').disabled=false;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem3Id:chooseCategory').disabled=false;
        } 
        
        function populateProductJS(val){
             blValue = val;
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem5Id:chooseBU').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem7Id:chooseProduct').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1AId:chooseMarket').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2AId:chooseMarketUnit').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem4Id:chooseProject').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem33Id:chooseCountry').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1Id:chooseCatArea').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2Id:chooseCatGroup').disabled='true';
             document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem3Id:chooseCategory').disabled='true';
             populateProduct(val);
        }
        
        function populateProductJS1(){
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem5Id:chooseBU').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem7Id:chooseProduct').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1AId:chooseMarket').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2AId:chooseMarketUnit').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem4Id:chooseProject').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem33Id:chooseCountry').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1Id:chooseCatArea').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2Id:chooseCatGroup').disabled=false;
            document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem3Id:chooseCategory').disabled=false;
        }
        
         function populateCatGroupJS(val){
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2Id:chooseCatGroup').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem3Id:chooseCategory').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1AId:chooseMarket').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2AId:chooseMarketUnit').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem4Id:chooseProject').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem33Id:chooseCountry').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem5Id:chooseBU').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem10Id:chooseBL').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem7Id:chooseProduct').disabled='true';
         populateCatGroup(val);
        }
        
        function populateCatGroupJS1(){
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2Id:chooseCatGroup').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem3Id:chooseCategory').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1AId:chooseMarket').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2AId:chooseMarketUnit').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem4Id:chooseProject').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem33Id:chooseCountry').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem5Id:chooseBU').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem10Id:chooseBL').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem7Id:chooseProduct').disabled=false;
        
        }
        
        function populateCatJS(val){
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1Id:chooseCatArea').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem3Id:chooseCategory').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1AId:chooseMarket').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2AId:chooseMarketUnit').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem4Id:chooseProject').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem33Id:chooseCountry').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem5Id:chooseBU').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem10Id:chooseBL').disabled='true';
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem7Id:chooseProduct').disabled='true';

         populateCat(val);
                
        }
        
        function populateCatJS1(){
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1Id:chooseCatArea').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem3Id:chooseCategory').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem1AId:chooseMarket').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem2AId:chooseMarketUnit').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem4Id:chooseProject').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem33Id:chooseCountry').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem5Id:chooseBU').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem10Id:chooseBL').disabled=false;
         document.getElementById('pgId:fm:pgBlkId:pgSectionGeoId:pgSectionItem7Id:chooseProduct').disabled=false;
        }
        
        function setPrdval(a){
            prdValue = a;
            document.getElementById('pgId:fm:hdFld').value = a;
            rerenderForm1(a);
        }
        
        function noenterForSave(ev){
        if(window.event && window.event.keycode==13|| ev.which ==13){
            saveRecord();
            return false;
        }
        else{
            return true;
        }    
        }
        
        function noenterForValidate(ev){
        if(window.event && window.event.keycode==13|| ev.which ==13){
            saveRecord();
            return false;
        }
        else{
            return true;
        }    
        }
        //-------------------JS functions for custom picklist ends------------------
        </script>
        
    <style type="text/css">
        .backgroundColor{background-color: #b0c4de; }
        
    </style>
    <apex:sectionHeader title="Scoring Template Edit" subtitle="New Scoring Template !"/>
     
        <apex:form id="fm">
        <apex:inputHidden value="{!prdVal}" id="hdFld"/> <!-- Hidden field for Custom Picklist -->
        <apex:outputPanel id="alertPane" >
            <script>
            function isMatch()
            {
                var bool1 = '{!isScopeMatch}';
                if (bool1 == 'false')
                {
                    var flag = confirm('Scope does not match with SPE Template, Do you really want to proceed further ?');
                    if (flag == true)
                    {
                        saveRecord();
                    }
                }
                else
                {
                    saveRecord();
                }
            }
            </script>
        </apex:outputPanel>
        
                <div style="display:none">
                    <apex:inputField value="{!scoringTemplate.CategoryCluster__c}" />
                    <apex:inputField value="{!scoringTemplate.CategoryGroup__c}" />
                    
                    <apex:inputField value="{!scoringTemplate.Region__c}" />
                    <apex:inputField value="{!scoringTemplate.SubRegion__c}"   />
                    <apex:inputField value="{!scoringTemplate.Country__c}"   />
                    
                    <apex:inputField value="{!scoringTemplate.BusinessUnit__c}" />
                    <apex:inputField value="{!scoringTemplate.BusinessLine__c}" />
                        
                </div>
            
              <apex:pageBlock tabStyle="SPE_SPETemplate__c" title="Scoring Template Edit" rendered="{!IF(scoringTemplate.Stage__c !='Obsolete',true,false)}" id="pgBlkId">
              <apex:pageMessages id="dupcheck"></apex:pageMessages>
                <apex:pageblockButtons >
                    <apex:commandButton value="Save" oncomplete="isMatch();" reRender="alertPane">
                         
                    </apex:commandButton>
                    <apex:commandButton action="{!cancel}" value="Cancel"/>
                </apex:pageblockButtons>
               
                <apex:pageBlockSection title="Information" collapsible="false" columns="2" id="pgSectionGeoId">
                    
                     <apex:pageBlockSectionItem >
                        <apex:outputText value="Scoring Template Name"/>
                        <apex:inputField value="{!scoringTemplate.Name}" required="true" onkeypress="return noenterForSave(event);"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem >
                        <apex:outputText value="SPE Template"/>
                        <apex:inputField value="{!scoringTemplate.SPETemplate__c}"/>
                    </apex:pageBlockSectionItem>
                    
                    
                    <!--  <apex:pageBlockSectionItem rendered="{!If(speTemplate.Region__c == defalultPicklist[0].Market__c, true, false)}">-->
                    <apex:pageBlockSectionItem rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}" id="pgSectionItem1AId">
                        <apex:outputText value="Market"/>
                        <apex:outputPanel id="marketPanel">
                            <apex:selectList id="chooseMarket" value="{!marketVal}" size="1" onchange="populateMarketUnitJS(this.value)">
                                <apex:selectOptions value="{!MarketValues}"/>
                            </apex:selectList>
                            <apex:actionStatus id="statusChangeC">
                                <apex:facet name="start">
                                    <apex:image value="/img/loading.gif" style="vertical-align: middle;"/>
                                </apex:facet>
                            </apex:actionStatus>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem id="pgSectionItem1IdReadOnly" rendered="{!IF(scoringTemplate.Stage__c =='Published',true,false)}">
                        <apex:outputText value="Market"/>
                        <apex:outputField value="{!scoringTemplate.Region__c}"/>
                    </apex:pageBlockSectionItem> 
                    
                    <apex:pageBlockSectionItem >
                        <apex:outputText value="Stage"/>
                        <apex:OutputField value="{!scoringTemplate.Stage__c}"/>
                    </apex:pageBlockSectionItem>
                    
                    <!--<apex:pageBlockSectionItem rendered="{!If(speTemplate.SubRegion__c == defalultPicklist[0].Market_Unit__c, true, false)}">-->
                    <apex:pageBlockSectionItem rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}" id="pgSectionItem2AId">
                        <apex:outputText value="Market Unit"/>
                        <apex:outputPanel id="muPanel">
                            <apex:selectList id="chooseMarketUnit" value="{!marketUnitVal}" size="1" onchange="populateCountryJS(this.value);">
                                <apex:selectOptions value="{!MarketUnitValues}"/>
                            </apex:selectList>
                            <apex:actionStatus id="statusChangeMU">
                                <apex:facet name="start">
                                    <apex:image value="/img/loading.gif" style="vertical-align: middle;"/>
                                </apex:facet>
                            </apex:actionStatus>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem id="pgSectionItem2IdReadOnly" rendered="{!IF(scoringTemplate.Stage__c =='Published',true,false)}">
                        <apex:outputText value="Market Unit"/>
                        <apex:outputField value="{!scoringTemplate.SubRegion__c}"/>
                    </apex:pageBlockSectionItem> 
                    
                    <!--<apex:outputText value="{!speTemplate.SubRegion__c}" rendered="{!If(speTemplate.SubRegion__c != defalultPicklist[0].Market_Unit__c, true, false)}"/>-->

                    
                    <!--  <apex:outputText value="{!speTemplate.Region__c}" rendered="{!If(speTemplate.Region__c != defalultPicklist[0].Market__c, true, false)}"/>-->
                    
                    <!-- <apex:pageBlockSectionItem rendered="{!If(speTemplate.CategoryCluster__c == defalultPicklist[0].Category_Area__c, true, false)}">-->
                    <apex:pageBlockSectionItem rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}" id="pgSectionItem1Id">
                        <apex:outputText value="Category Area"/>
                        <apex:outputPanel id="CAPanel">
                            <apex:selectList id="chooseCatArea" value="{!caVal}" size="1" onchange="populateCatGroupJS(this.value)">
                                <apex:selectOptions value="{!CategoryAreaValues}"/>
                            </apex:selectList>
                            <apex:actionStatus id="statusChangeCatArea">
                                <apex:facet name="start">
                                    <apex:image value="/img/loading.gif" style="vertical-align: middle;"/>
                                </apex:facet>
                            </apex:actionStatus>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem id="pgSectionItem3IdReadOnly" rendered="{!IF(scoringTemplate.Stage__c =='Published',true,false)}">
                        <apex:outputText value="Category Area"/>
                        <apex:outputField value="{!scoringTemplate.CategoryCluster__c}"/>
                    </apex:pageBlockSectionItem> 
                    
                    <!--  <apex:outputText value="{!speTemplate.CategoryCluster__c}" rendered="{!If(speTemplate.CategoryCluster__c != defalultPicklist[0].Category_Area__c, true, false)}"/>-->
                    
                     <!--<apex:pageBlockSectionItem rendered="{!If(speTemplate.Country__c == defalultPicklist[0].Country__c, true, false)}">-->
                    <apex:pageBlockSectionItem rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}" id="pgSectionItem33Id">
                        <apex:outputText value="Country"/>
                        <apex:outputPanel id="countryPanel">
                                        
                            <apex:selectList id="chooseCountry" value="{!countryVal}" size="1" onchange="populatePrjJS(this.value);">
                                <apex:selectOptions value="{!CountryValues}"/>
                                
                       </apex:selectList>
                       <apex:actionStatus id="statusChangeCountry">
                                <apex:facet name="start">
                                    <apex:image value="/img/loading.gif" style="vertical-align: middle;"/>
                                </apex:facet>
                            </apex:actionStatus>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem id="pgSectionItem4IdReadOnly" rendered="{!IF(scoringTemplate.Stage__c =='Published',true,false)}">
                        <apex:outputText value="Country"/>
                        <apex:outputField value="{!scoringTemplate.Country__c}"/>
                    </apex:pageBlockSectionItem>
                     
                    <!--<apex:outputText value="{!speTemplate.Country__c}" rendered="{!If(speTemplate.Country__c != defalultPicklist[0].Country__c, true, false)}"/>-->

                    
                                        
                    <!--<apex:pageBlockSectionItem rendered="{!If(speTemplate.CategoryGroup__c == defalultPicklist[0].Category_Group__c, true, false)}">-->
                    <apex:pageBlockSectionItem rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}" id="pgSectionItem2Id">
                        <apex:outputText value="Category Group"/>
                        <apex:outputPanel id="CGPanel">
                            <apex:selectList id="chooseCatGroup" value="{!cgVal}" size="1" onchange="populateCatJS(this.value)">
                                <apex:selectOptions value="{!CategoryGroupValues}"/>
                            </apex:selectList>
                            <apex:actionStatus id="statusChangeCatGroup">
                                <apex:facet name="start">
                                    <apex:image value="/img/loading.gif" style="vertical-align: middle;"/>
                                </apex:facet>
                            </apex:actionStatus>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem id="pgSectionItem5IdReadOnly" rendered="{!IF(scoringTemplate.Stage__c =='Published',true,false)}">
                        <apex:outputText value="Category Group"/>
                        <apex:outputField value="{!scoringTemplate.CategoryGroup__c}"/>
                    </apex:pageBlockSectionItem>
                    
                    <!--<apex:outputText value="{!speTemplate.CategoryGroup__c}" rendered="{!If(speTemplate.CategoryGroup__c != defalultPicklist[0].Category_Group__c, true, false)}"/>-->
                    
                     <!--<apex:pageBlockSectionItem rendered="{!If(speTemplate.Project__c == defalultPicklist[0].Project__c, true, false)}">-->
                    <apex:pageBlockSectionItem rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}" id="pgSectionItem4Id">
                        <apex:outputText value="Project"/>
                        <apex:outputPanel id="projectPanel">
                                        
                            <apex:selectList id="chooseProject" value="{!projectVal}" size="1">
                                <apex:selectOptions value="{!ProjectValues}"/>
                                
                       </apex:selectList>
                       
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem id="pgSectionItem6IdReadOnly" rendered="{!IF(scoringTemplate.Stage__c =='Published',true,false)}">
                        <apex:outputText value="Project"/>
                        <apex:outputField value="{!scoringTemplate.Project__c}"/>
                    </apex:pageBlockSectionItem>
                    
                    <!--<apex:outputText value="{!speTemplate.Project__c}" rendered="{!If(speTemplate.Project__c != defalultPicklist[0].Project__c, true, false)}"/>-->

                                       
                    <!--<apex:pageBlockSectionItem rendered="{!If(speTemplate.Category__c == defalultPicklist[0].Category__c, true, false)}">-->
                    <apex:pageBlockSectionItem rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}" id="pgSectionItem3Id">
                        <apex:outputText value="Category"/>
                        <apex:outputPanel id="CPanel">
                            <apex:selectList id="chooseCategory" value="{!ctVal}" size="1">
                                <apex:selectOptions value="{!CategoryValues}"/>
                            </apex:selectList>
                            
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem id="pgSectionItem7IdReadOnly" rendered="{!IF(scoringTemplate.Stage__c =='Published',true,false)}">
                        <apex:outputText value="Category"/>
                        <apex:outputField value="{!scoringTemplate.Category__c}"/>
                    </apex:pageBlockSectionItem>
                    
                     <apex:pageBlockSectionItem id="pgSectionItemorggroup" rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}">
                        <apex:outputText value="Organization Group"/>
                        <apex:inputField value="{!scoringTemplate.Organization_Group__c}"/>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem id="pgSectionItemorggroupop" rendered="{!IF(scoringTemplate.Stage__c =='Published',true,false)}">
                        <apex:outputText value="Organization Group"/>
                        <apex:outputField value="{!scoringTemplate.Organization_Group__c}"/>
                    </apex:pageBlockSectionItem>
                    <!--<apex:outputText value="{!speTemplate.Category__c}" rendered="{!If(speTemplate.Category__c != defalultPicklist[0].Category__c, true, false)}"/>-->
                   
                                       
                    <!--<apex:pageBlockSectionItem rendered="{!If(speTemplate.BusinessUnit__c == 'All Business Units', true, false)}">-->
                    <apex:pageBlockSectionItem rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}" id="pgSectionItem5Id">
                        <apex:outputText value="Business Unit"/>
                        <apex:outputPanel id="BUPanel">
                                        
                            <apex:selectList id="chooseBU" value="{!buVal }" size="1" onchange="populateBLJS(this.value);">
                                <apex:selectOptions value="{!BusinessUnitValues}"/>
                            </apex:selectList>
                            <apex:actionStatus id="statusChangeBU">
                                <apex:facet name="start">
                                    <apex:image value="/img/loading.gif" style="vertical-align: middle;"/>
                                </apex:facet>
                             </apex:actionStatus>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem id="pgSectionItem8IdReadOnly" rendered="{!IF(scoringTemplate.Stage__c =='Published',true,false)}">
                        <apex:outputText value="Business Unit"/>
                        <apex:outputField value="{!scoringTemplate.BusinessUnit__c}"/>
                    </apex:pageBlockSectionItem>
                     
                    <!--<apex:outputText value="{!speTemplate.BusinessUnit__c}" rendered="{!If(speTemplate.BusinessUnit__c != defalultPicklist[0].Business_Unit__c, true, false)}"/>-->
                    
                    <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
                    
                    <!--<apex:pageBlockSectionItem rendered="{!If(speTemplate.BusinessLine__c == defalultPicklist[0].Business_Line__c, true, false)}">-->
                    <apex:pageBlockSectionItem rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}" id="pgSectionItem10Id">
                        <apex:outputText value="Business Line"/>
                        <apex:outputPanel id="BLPanel">
                                        
                            <apex:selectList id="chooseBL" value="{!blVal}" size="1" onchange="populateProductJS(this.value)">
                                <apex:selectOptions value="{!BusinesLineValues}"/>
                            </apex:selectList>
                           <apex:actionStatus id="statusChangeBL">
                                <apex:facet name="start">
                                    <apex:image value="/img/loading.gif" style="vertical-align: middle;"/>
                                </apex:facet>
                             </apex:actionStatus>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem id="pgSectionItem9IdReadOnly" rendered="{!IF(scoringTemplate.Stage__c =='Published',true,false)}">
                        <apex:outputText value="Business Line"/>
                        <apex:outputField value="{!scoringTemplate.BusinessLine__c}"/>
                    </apex:pageBlockSectionItem> 
                    <!--<apex:outputText value="{!speTemplate.BusinessLine__c}" rendered="{!If(speTemplate.BusinessLine__c != defalultPicklist[0].Business_Line__c, true, false)}"/>-->
                    
                    <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
                    
                    <!--<apex:pageBlockSectionItem rendered="{!If(speTemplate.Product__c == defalultPicklist[0].Product__c, true, false)}">-->
                    <apex:pageBlockSectionItem rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}" id="pgSectionItem7Id">
                        <apex:outputText value="Product"/>
                        <apex:outputPanel id="ProductPanel">
                            <apex:selectList id="chooseProduct" value="{!prdVal}" size="1" onchange="setPrdval();">
                                <apex:selectOptions value="{!ProductValues}"/>
                            </apex:selectList>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem id="pgSectionItem10IdReadOnly" rendered="{!IF(scoringTemplate.Stage__c =='Published',true,false)}">
                        <apex:outputText value="Product"/>
                        <apex:outputField value="{!scoringTemplate.Product__c}"/>
                    </apex:pageBlockSectionItem>
                   
                    <!--<apex:outputText value="{!speTemplate.Product__c}" rendered="{!If(speTemplate.Product__c != defalultPicklist[0].Product__c, true, false)}"/>-->
                </apex:pageBlockSection>  
        </apex:pageblock>
        
        <apex:pageblock tabStyle="SPE_SPETemplate__c" title=" Scoring Threshold" id="pb1" rendered="{!IF(scoringTemplate.Stage__c !='Obsolete',true,false)}">
         
        <apex:pageMessage summary="High KPI value indicates High Performance score OR for some KPIs, The high value may mean a low performance score.
                                    Please add Threshold values/score according to KPI." severity="info" strength="2" />
        <apex:pageblockButtons >
          <apex:commandbutton value="Validate" action="{!validate}"   reRender="pb1, pb2"/>
          <apex:outputText style="width: 60px; color:Green; font-size: 150%; font-family:italic" value="    Entered value is correct " rendered="{!isCorrect}" />
        </apex:pageblockButtons>
        
        <apex:pageMessages id="pb2"/>
        
        <apex:repeat value="{!toBeUpdatedScoringCalculation}" var="key" >
        
        <!--*********************Changes For Encryption***************-->
        <!--<apex:pageblocksection id="pb1" title="{!toBeUpdatedScoringCalculation[key][0].kpiName}" columns="1">-->
        <apex:pageblocksection id="pb1" title="{!toBeUpdatedScoringCalculation[key][0].kpiDef.KPI_Title__c}" columns="1">
        <!--*********************END***************-->
        
        <apex:pageBlockTable value="{!toBeUpdatedScoringCalculation[key]}"  var="item"> 
                <apex:column width="15%">
                        Score&nbsp;<b><apex:outputfield style="width: 60px;" value="{!item.spesc.Score__c}" />&nbsp;</b>for KPI values
                 </apex:column>
                 
                 <apex:column width="10%">
                     <apex:inputfield style="width: 60px;" value="{!item.spesc.LowerTo__c}" rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}"/>
                    <b> <apex:outputfield style="width: 60px;" value="{!item.spesc.LowerTo__c}" rendered="{!IF(scoringTemplate.Stage__c =='Published',true,false)}"/></b>
                 </apex:column>
                
                <apex:column width="6%" >
                        <apex:inputfield style="width: 60px;" value="{!item.spesc.Lower__c}" onKeyPress="return noenterForValidate(event);" rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}"/>
                      <b>  <apex:outputfield style="width: 60px;" value="{!item.spesc.Lower__c}" rendered="{!IF(scoringTemplate.Stage__c =='Published',true,false)}"/></b>
                 </apex:column>
                 
                 <apex:column width="6%" style="text-align:center;">
                        and
                 </apex:column>
                 <apex:column width="6%">
                        <apex:inputfield style="width: 60px;" value="{!item.spesc.UpperTo__c}" rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}"/>
                        <b><apex:outputfield style="width: 60px;" value="{!item.spesc.UpperTo__c}" rendered="{!IF(scoringTemplate.Stage__c =='Published',true,false)}"/></b>
                 </apex:column>
                 
                 <apex:column width="10%">
                        <apex:inputfield style="width: 60px;" value="{!item.spesc.Upper__c}" onKeyPress="return noenterForValidate(event);" rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}"/>
                       <b> <apex:outputfield style="width: 60px;" value="{!item.spesc.Upper__c}" rendered="{!IF(scoringTemplate.Stage__c =='Published',true,false)}"/></b>
                 </apex:column>
                 
                <apex:column width="16%" rendered="{!IF(scoringTemplate.Stage__c !='Published',true,false)}">
                    <apex:facet name="header"></apex:facet>
                        <apex:outputtext style="width: 60px; color:red; font-size: 130%;" rendered="{!item.isError}" value="Please fill the field with correct Values" id="opt">
                        </apex:outputtext>
                 </apex:column>
            </apex:pageBlockTable>
            </apex:pageblocksection>
           </apex:repeat>
           
        </apex:pageblock>
        
        <apex:actionFunction id="save" name="saveRecord" action="{!save}"/>
        <apex:actionFunction id="saveOnValidate" name="ValidateOnEnter" action="{!validate}"/> 
        
         <!-----action function for custom picklist starts--------------------- -->
    
    <apex:actionFunction id="rerenderForm1" name="rerenderForm1" action="{!blankMethod}" reRender="none">
        <apex:param value="" name="rerenderForm11"  assignTo="{!prdVal}"/>
     </apex:actionFunction>
     
    <apex:actionFunction id="populateMarketUnit" name="populateMarketUnit" action="{!fillMarketUnit}" immediate="true" reRender="muPanel,countryPanel,projectPanel,myMsg" status="statusChangeC" oncomplete="populateMarketUnitJS1();">
                <apex:param value="" name="marketVal"  assignTo="{!marketVal}"/>
     </apex:actionFunction> 
     
      
     <apex:actionFunction id="populateCountry" name="populateCountry" action="{!fillCountry}" immediate="true" reRender="countryPanel,marketPanel,projectPanel,myMsg" status="statusChangeMU" oncomplete="populateCountryJS1()">
         <apex:param value="" name="marketUnitVal"  assignTo="{!marketUnitVal}"/>
     </apex:actionFunction> 
     
     <apex:actionFunction id="populatePrj" name="populatePrj" action="{!fillProject}" immediate="true" reRender="projectPanel,myMsg" status="statusChangeCountry" oncomplete="populatePrjJS1()">
         <apex:param value="" name="countryVal"  assignTo="{!countryVal}"/>
     </apex:actionFunction>
     
     <apex:actionFunction id="populateBL" name="populateBL" action="{!fillBusinessLine}" immediate="true" reRender="BLPanel,ProductPanel,myMsg" status="statusChangeBU" oncomplete="populateBLJS1()">
                <apex:param value="" name="buVal"  assignTo="{!buVal}"/>
     </apex:actionFunction> 
     
      <apex:actionFunction id="populateProduct" name="populateProduct" action="{!fillProduct}" immediate="true" reRender="ProductPanel,myMsg" status="statusChangeBL" oncomplete="populateProductJS1()">
                <apex:param value="" name="blVal"  assignTo="{!blVal}"/>
     </apex:actionFunction> 
     
      <apex:actionFunction id="populateCatGroup" name="populateCatGroup" action="{!fillCategoryGroup}" immediate="true" reRender="CGPanel,CPanel,myMsg" status="statusChangeCatArea" oncomplete="populateCatGroupJS1()">
                <apex:param value="" name="caVal"  assignTo="{!caVal}"/>
     </apex:actionFunction> 
     
      <apex:actionFunction id="populateCat" name="populateCat" action="{!fillCategory}" immediate="true" reRender="CPanel,myMsg" status="statusChangeCatGroup" oncomplete="populateCatJS1()">
                <apex:param value="" name="cgVal"  assignTo="{!cgVal}"/>
     </apex:actionFunction> 

      <!--  Action function for custom picklist ends ---------  --> 
        </apex:form>
        
</apex:page>