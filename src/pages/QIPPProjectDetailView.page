<!-- Purpose: This page is created as Detail page of QIPP DMAIC Form, having the funcationality of InlineEdit, and other funcationlity based on the approval phase
--- Author: Haripriya/Manish ---
--- Created by: Haripriya ---
--- Created Date: 31/05/2016 -->

<apex:page id="page" standardController="QIPP_Project__c" extensions="QIPPProject,QIPPBenefit,BenefitingBusinessGroupController,ProjRedeployController" sidebar="false" tabStyle="QIPP_Project__c" title="QIPP Project: {!proj.Project_Number__c}" docType="html-5.0" >
    <apex:sectionHeader title="{!If(proj.Id == null ,$ObjectType.QIPP_Project__c.Label,$ObjectType.QIPP_Project__c.Label)}" subtitle="{!If(proj.Id == null ,'New '+ $ObjectType.QIPP_Project__c.Label,proj.Project_Number__c)}"/>
    <!-- JQuery Liberary Files-->
    <apex:includeScript value="https://code.jquery.com/jquery-2.1.1.min.js"/>
    
    <script> 
    
    
    function edit(){
        if('{!recIsLocked}' == true){
            alert('Record Locked :\n The record you are trying to edit has been locked.\n Please contact your administrator if access is necessary.');
            return false;
        }else{
            editnow();
        }
    }
    function del(){
        if(confirm("Are you sure Do you want to Delete ths project?")){
            delnow();
        } 
    }
    //Code starting for InlineEdit -- Added by Manish
    var j$ = jQuery.noConflict();
    var reqMarked = false;
    var totalvalidatedamount=0;
    var edittotalvalidatedamount=0;
    var cancelflg = "false";
    j$(document).ready(function() {
        var profilee = '{!profilename}';
        if(profilee == 'Nokia QIPP Project Viewer'){
            j$("input[name='newNote']").hide();
            j$("input[name='attachFile']").hide();
            j$("input[name='piRemove']").hide();
        }
        var projState = '{!projState}';
        var rolename = '{!rolename}';
        /*if((projState == 'Complete' || projState =='Closed') && (rolename == 'QIPP Project Lead')) {
            j$("[id*='editButton']").hide();
            //j$("[id*='benefitButton']").hide();
            //--Added by Rahul(E093)(15-11-2016)--Start--//
            j$("[id*='saveButton']").hide();
            j$("[id*='cancelButton']").hide();
            j$("[id*='unlockRecord']").hide();
            j$("[id*='deleteButton']").hide();
            j$("[id*='cloneButton']").hide();
            j$("[id*='shareButton']").hide();
            j$("[id*='approvalButton']").hide();
            //--Added by Rahul(E093)(15-11-2016)--End--//
            
            //--Added by Haripriya(25-11-2016)--Start--//
            j$("[id$='lockIcon']").hide();
            //--Added by Haripriya(25-11-2016)--End--//
            
        }*/
        if((projState == 'Complete' || projState =='Closed') && (rolename == 'QIPP Project Lead')) {
                j$("[id*='editButton']").hide();
                j$("[id*='BAMapping']").hide();
                j$("[id*='addBenefit']").hide();
                j$("[id*='editBenefit']").hide();
                j$("[id*='deleteBenefit']").hide();
                j$("[id*='BenefitsOverview']").hide();
                j$("[id*='closeviewpopup']").hide();
                j$("[id*='Adddistribution']").hide();
                j$("[id*='addprojredeploy']").hide();
                j$("[id*='editpipe']").hide();
                j$("[id*='deletepipe']").hide();
                //--Added by Rahul(E093)(15-11-2016)--Start--//
                j$("[id*='saveButton']").hide();
                j$("[id*='cancelButton']").hide();
                j$("[id*='unlockRecord']").hide();
                j$("[id*='deleteButton']").hide();
                //j$("[id*='cloneButton']").hide();
                j$("[id*='shareButton']").hide();
                j$("[id*='approvalButton']").hide();
                //--Added by Rahul(E093)(15-11-2016)--End--//
                
                //--Added by Haripriya(25-11-2016)--Start--//
                j$("[id$='lockIcon']").hide();
                //--Added by Haripriya(25-11-2016)--End--//
            }
        if(projState =='Closed' && (rolename == 'QIPP Portfolio Owner')) {
            j$("[id*='editButton']").hide();
            //j$("[id*='benefitButton']").hide();
        }
        if(projState =='Complete' && (rolename == 'QIPP Portfolio Owner')) {
            //j$("[id*='benefitButton']").hide();
        }
        if(projState =='Closed' && (rolename == 'QIPP Portfolio Owner')) {
                j$("[id*='editButton']").hide();
                j$("[id*='BAMapping']").hide();
                j$("[id*='editpipe']").hide();
                j$("[id*='deletepipe']").hide();
                j$("[id*='addBenefit']").hide();
                j$("[id*='editBenefit']").hide();
                j$("[id*='deleteBenefit']").hide();
                j$("[id*='BenefitsOverview']").hide();
                j$("[id*='closeviewpopup']").hide();
                j$("[id*='Adddistribution']").hide();
                j$("[id*='addprojredeploy']").hide();
            }
            if(projState =='Complete' && (rolename == 'QIPP Portfolio Owner')) {
                j$("[id*='BAMapping']").show();
                j$("[id*='editpipe']").hide();
                j$("[id*='deletepipe']").hide();
                j$("[id*='addBenefit']").hide();
                j$("[id*='editBenefit']").hide();
                j$("[id*='deleteBenefit']").hide();
                j$("[id*='BenefitsOverview']").hide();
                j$("[id*='closeviewpopup']").hide();
                j$("[id*='Adddistribution']").hide();
                j$("[id*='addprojredeploy']").hide();
            }
        j$("input[name='piSubmit']").hide();
        j$('.inlineEditWrite,.inlineEditWriteOn')
        .dblclick(function() {
                j$("[id*='editpipe']").hide();
                j$("[id*='deletepipe']").hide();
                j$("[id*='editBenefit']").hide();
                j$("[id*='deleteBenefit']").hide();
                j$("[id*='viewBenefit']").hide();
                j$("[id*='addBenefit']").hide();
                j$("[id*='BenefitsOverview']").hide();
                j$("[id*='Adddistribution']").hide();
                j$("[id*='addprojredeploy']").hide();
                j$("[id*='selectBAM']").hide();
                
                
            if (!reqMarked) {
                j$(".pageType").html('{!$ObjectType.QIPP_Project__c.Label}'+' Edit');
                markRequired();
                j$("#page_form_pblock_pbsection1_projStateItem_projState option[value='']").remove();
                j$("#page_form_pblock_pbsection2_Beltprjtyp_Beltprjtyp option[value='']").remove();
                j$("#page_form_pblock_pbsection2_mentorCert_mentorCert option[value='']").remove();
                j$("#page_form_pblock_pbsection3_Methodology_Methodology option[value='']").remove();
                j$("#page_form_pblock_pbsection1_bBG_bBG option[value='']").remove();
                j$("#page_form_pblock_pbsection1_bBU_bBU option[value='']").remove();
                j$("#page_form_pblock_pbsection1_bBL_bBL option[value='']").remove();
                j$("#page_form_pblock_pbsection1_projStateItem_projState option[value='Not Started']").remove();
                
                var projState = '{!projState}';
                var rolename = '{!rolename}';
                if(rolename == 'QIPP Project Lead' || rolename == 'QIPP Portfolio Owner'){
                    j$("#page_form_pblock_pbsection1_projStateItem_projState option[value='Closed']").remove();
                }
                //--Added by Rahul(E103)(15-11-2016)--Start--//
                if(rolename == 'QIPP Project Lead'){
                    j$("#page_form_pblock_pbsection1_projStateItem_projState option[value='Complete']").remove();
                }
                //--Added by Rahul(E103)(15-11-2016)--End--//                        
                if((projState == 'Complete' || projState =='Closed') && (rolename == 'QIPP Project Lead')) {
                    j$("[id*='saveButton']").hide();
                }
                if(projState =='Closed' && (rolename == 'QIPP Portfolio Owner')) {
                    j$("[id*='saveButton']").hide();
                }
                
            }
        });
        
        //Code for Validation Rule in InlineEdit -- Added by Manish
        if(j$('[id$=":errorblock"]').html()!="")
        {
            j$("[id$='saveButton']").attr('style','display:inline');
            j$("[id$='cancelButton']").attr('style','display:inline');
            j$("[id$='editButton']").attr('style','display:none');
            j$("[id$='deleteButton']").attr('style','display:none');
            j$("[id$='cloneButton']").attr('style','display:none');
            j$("[id$='shareButton']").attr('style','display:none');
            //j$("[id$='benefitButton']").attr('style','display:none');
            j$("[id$='approvalButton']").attr('style','display:none');
        }
        bbgreadonly();
        editclonesum();
        if(document.getElementById('page:form:pblock:benefitingBusinessGrp')){
            //console.log('Indide benefitingBusinessGrp');
            j$("[id*='benefitingBusinessGrp_link']").show();
            j$("[id*='BenefitDistripipe']").show();
        }
        //Back to top start
        // ===== Scroll to Top ==== 
        j$(window).scroll(function() {
            if (j$(this).scrollTop() >= 50) {        // If page is scrolled more than 50px
                j$('#return-to-top').fadeIn(200);    // Fade in the arrow
            } else {
                j$('#return-to-top').fadeOut(200);   // Else fade out the arrow
            }
        });
        j$('#return-to-top').click(function() {      // When arrow is clicked
            j$('body,html').animate({
                scrollTop : 0                       // Scroll to top of body
            }, 500);
        });
        //Back to top End
        
         var selectvar = '{!RedepRowNum}';
        var selectvar = '{!projectrec.Can_Project_Redeployed__c}';
        if(document.getElementById('idSpan') !=null){
        if(selectvar =='Yes')
            {
            document.getElementById('idSpan').style.display = 'block';
            document.getElementById('page:form:pblock:radiobtn:projredep:projredeployed:0').checked = true;
            }
            else
            {
                document.getElementById('page:form:pblock:radiobtn:projredep:projredeployed:0').checked = false;
                
            }
        }
        
    });
    
    function markRequired() {
        j$('[id*=page_form_pblock_pbsection1_projName_projName_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv'); //Project Name
        j$('[id*=page_form_pblock_pbsection1_cemtID_cemtID_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//CEMTID
        j$('[id*=page_form_pblock_pbsection1_projLead_projLead_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//Project Lead
        j$('[id*=page_form_pblock_pbsection1_portfolioName_portfolioName_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//PortfolioName
        j$('[id*=page_form_pblock_pbsection1_portfolioDesc_portfolioDesc_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//ProjDesc
        j$('[id*=page_form_pblock_pbsection1_bBG_bBG_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//Portfolio BG    
        j$('[id*=page_form_pblock_pbsection1_bBU_bBU_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//PBU
        j$('[id*=page_form_pblock_pbsection1_bBL_bBL_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//PBL
        j$('[id*=page_form_pblock_pbsection1_projStateItem_projState_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//Proj State
        
        j$('[id*=page_form_pblock_pbsection2_bcandment_bcandment_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv'); //Project Mentor
        j$('[id*=page_form_pblock_pbsection2_bpsponsor_bpsponsor_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//Project Sponsor
        j$('[id*=page_form_pblock_pbsection2_Beltprjtyp_Beltprjtyp_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//Project Type
        j$('[id*=page_form_pblock_pbsection2_bprojchamp_bprojchamp_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//proj champ
        j$('[id*=page_form_pblock_pbsection2_mentorCert_mentorCert_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//Mentor Cert
        j$('[id*=page_form_pblock_pbsection2_bumbb_bumbb_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//BUMBB   
        j$('[id*=page_form_pblock_pbsection2_DDDPlan_DDPlan_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//DDPLAN
        j$('[id*=page_form_pblock_pbsection2_DDMPlan_DMPlan_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//DMPLAN
        j$('[id*=page_form_pblock_pbsection2_DDAPlan_DAPlan_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//DAPlan
        j$('[id*=page_form_pblock_pbsection2_DDIPlan_DIPlan_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//DIPLAN
        j$('[id*=page_form_pblock_pbsection2_DDCPlan_DCPlan_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//DCPLAN
        j$('[id*=page_form_pblock_pbsection3_Methodology_Methodology_ileinner].inlineEditDiv, .inlineEditGroup')
        .addClass('inlineEditRequiredDiv')
        .removeClass('inlineEditDiv');//Methodology     
        
        
        j$('[id*=page_form_pblock_pbsection1_projName_projName_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //Project Name
        j$('[id*=page_form_pblock_pbsection1_cemtID_cemtID_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //CEMT Id
        j$('[id*=page_form_pblock_pbsection1_projLead_projLead_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //Project Lead
        j$('[id*=page_form_pblock_pbsection1_portfolioName_portfolioName_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //PortfolioName
        j$('[id*=page_form_pblock_pbsection1_portfolioDesc_portfolioDesc_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //Proj Desc
        j$('[id*=page_form_pblock_pbsection1_bBG_bBG_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //Portfolio BG
        j$('[id*=page_form_pblock_pbsection1_bBU_bBU_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //PBU
        j$('[id*=page_form_pblock_pbsection1_bBL_bBL_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //PBL
        j$('[id*=page_form_pblock_pbsection1_projStateItem_projState_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //Proj state
        
        j$('[id*=page_form_pblock_pbsection2_bcandment_bcandment_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //Project Mentor
        j$('[id*=page_form_pblock_pbsection2_bpsponsor_bpsponsor_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //Project Sponsor
        j$('[id*=page_form_pblock_pbsection2_Beltprjtyp_Beltprjtyp_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //Project Type
        j$('[id*=page_form_pblock_pbsection2_bprojchamp_bprojchamp_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //Proj Champion
        j$('[id*=page_form_pblock_pbsection2_mentorCert_mentorCert_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //MentorCert
        j$('[id*=page_form_pblock_pbsection2_bumbb_bumbb_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //BUMBB
        j$('[id*=page_form_pblock_pbsection2_DDDPlan_DDPlan_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //DDPLAN
        j$('[id*=page_form_pblock_pbsection2_DDMPlan_DMPlan_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //DMPLAN
        j$('[id*=page_form_pblock_pbsection2_DDAPlan_DAPlan_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //DAPlan
        j$('[id*=page_form_pblock_pbsection2_DDIPlan_DIPlan_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //DIPlan
        j$('[id*=page_form_pblock_pbsection2_DDCPlan_DCPlan_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //DCPlan
        j$('[id*=page_form_pblock_pbsection3_Methodology_Methodology_ileinneredit].inlineEditCompoundDiv')
        .addClass('inlineEditRequiredDiv'); //Methodology   
    }
    
    //--Added by Rahul(23-08-2016)--Start--//
    function refreshBAM(){
        refreshBAMSection();
    }
    function myTimeOut(){
        setTimeout(function(){
            
        }, 2000);    
    }
    //--Added by Rahul(23-08-2016)--End--//
     
    
    function projectCreation(){
        var win = window.open("/{!$Label.Benefits_Overview_Report_ID}?pv0={!str}", '_blank');                                   
        // var win = window.open("apex/QIPP_Project_Record_Types_Page?retURL=home&urlfrom=home&save_new=1&sfdc.override=1", '_Parent'); 
        win.focus();
    }
    
    function sumplanned()
    {
        var sumofplannedamt=0;
        var eleAmount = 0;
        j$('.totalplamount').each(function(index, ele){
            eleAmount = parseFloat(j$(ele).val().replace(/,/g,"") || 0).toFixed(1);
            sumofplannedamt = parseFloat(sumofplannedamt) + parseFloat(eleAmount);
            if(eleAmount!=0)
            {
                j$(ele).val(eleAmount.toLocaleString());
                
            }
            if(eleAmount==0){
                j$(ele).val(eleAmount);
            }
        });
        if(sumofplannedamt!=0){
            document.getElementById('page:form:pblock:benefitLineItem:addbenefittable:pltotal').value=sumofplannedamt.toFixed(1);
        }
        else
        {
            document.getElementById('page:form:pblock:benefitLineItem:addbenefittable:pltotal').value="-";
        } 
        
        
    }
    
    function sumachieved()
    {
        var sumofachievedamt=0;
        var eleAmount = 0;
        j$('.totalachamount').each(function(index, ele){
            eleAmount = parseFloat(j$(ele).val().replace(/,/g,"") || 0).toFixed(1);
            sumofachievedamt = parseFloat(sumofachievedamt) + parseFloat(eleAmount);
            if(eleAmount!=0)
            {
                j$(ele).val(eleAmount);
                
            }
            if(eleAmount==0){
                j$(ele).val(eleAmount);
            }
            
        });
        if(sumofachievedamt!=0){
            document.getElementById('page:form:pblock:benefitLineItem:addbenefittable:achtotal').value=sumofachievedamt.toFixed(1);
        }
        else
        {
            document.getElementById('page:form:pblock:benefitLineItem:addbenefittable:achtotal').value="-";
        }
        
    }
    function sumfuture()
    {
        var sumoffutureamt=0;
        var eleAmount = 0;
        j$('.totalfutamount').each(function(index, ele){
            eleAmount = parseFloat(j$(ele).val().replace(/,/g,"") || 0).toFixed(1);
            sumoffutureamt = parseFloat(sumoffutureamt) + parseFloat(eleAmount);
            if(eleAmount!=0)
            {
                j$(ele).val(eleAmount);
                
            }
            if(eleAmount==0){
                j$(ele).val(eleAmount);
            }
        });
        if(sumoffutureamt!=0){
            document.getElementById('page:form:pblock:benefitLineItem:addbenefittable:futtotal').value=sumoffutureamt.toFixed(1);
        }
        else
        {
            document.getElementById('page:form:pblock:benefitLineItem:addbenefittable:futtotal').value="-";
        }
        
        
    }
    
    
    function editsumplanned()
    {
        
        var sumofplannedamt=0;
        var eleAmount = 0;
        j$('.edittotalplamount').each(function(index, ele){
            eleAmount = parseFloat(j$(ele).val().replace(/,/g,"") || 0).toFixed(1);
            sumofplannedamt = parseFloat(sumofplannedamt) + parseFloat(eleAmount);
            if(eleAmount!=0)
            {
                j$(ele).val(eleAmount);
                
            }
            if(eleAmount==0){
                j$(ele).val(eleAmount);
            }
        });
        if(sumofplannedamt!=0 && document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:pltotal') != null){
            document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:pltotal').value=sumofplannedamt.toFixed(1);
        }
        if(sumofplannedamt==0 && document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:pltotal') != null){
            document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:pltotal').value="-";
        }
        
    }
    
    function editsumachieved()
    {
        
        var sumofachievedamt=0;
        var eleAmount = 0;
        j$('.edittotalachamount').each(function(index, ele){
            eleAmount = parseFloat(j$(ele).val().replace(/,/g,"") || 0).toFixed(1);
            sumofachievedamt = parseFloat(sumofachievedamt) + parseFloat(eleAmount);
            if(eleAmount!=0)
            {
                j$(ele).val(eleAmount);
                
            }
            if(eleAmount==0){
                j$(ele).val(eleAmount);
            }
        });
        if(sumofachievedamt!=0 && document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:achtotal') != null){
            document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:achtotal').value=sumofachievedamt.toFixed(1);
        }
        if(sumofachievedamt==0 && document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:achtotal') != null){
            document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:achtotal').value="-";
        }
    }
    
    function editsumfuture()
    {
        var sumoffutureamt=0;
        var eleAmount = 0;
        j$('.edittotalfutamount').each(function(index, ele){
            eleAmount = parseFloat(j$(ele).val().replace(/,/g,"") || 0).toFixed(1);
            sumoffutureamt = parseFloat(sumoffutureamt) + parseFloat(eleAmount);
            if(eleAmount!=0)
            {
                j$(ele).val(eleAmount);
                
            }
            if(eleAmount==0){
                j$(ele).val(eleAmount);
            }
        });
        if(sumoffutureamt!=0 && document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:futtotal') != null){
            document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:futtotal').value=sumoffutureamt.toFixed(1);
        }
        if(sumoffutureamt==0 && document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:futtotal') != null){
            document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:futtotal').value="-";
        }
    }
    
    
    function boolFunction(variable)
    {
        if(variable.value == 'Yes')
        {
            document.getElementById('idSpan').style.display = 'block';
        }
        else
            document.getElementById('idSpan').style.display = 'none';
    } 
    
    function clonesum(){
        
        sumplanned();
        sumachieved();
        sumfuture();
    }
    
    function editclonesum(){
        
        editsumplanned();
        editsumachieved();
        editsumfuture();
    }
    
    /*  function sumBBG(){
                    
                       
                        var sumofBBGamt1=0;
                        j$('.BBGtotal').each(function(index, ele){
                        sumofBBGamt1 += (parseFloat(j$(ele).val()) || 0);
                        });
                        if(sumofBBGamt1>95)
                        {
                            alert("Total BBG % Distribution should not be greater than 100%.")
                        }
                        document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGdefault').value=((100)-(sumofBBGamt1));
                        bbgreadonly();
                        
                    }
                    
                     function bbgreadonly()
                     {
                          if(document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGdefault') != null){
                         document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGdefault').readOnly=true;}
                      }*/
            
            
            function validationamount(){
                
                if((document.getElementById('page:form:pblock:benefitLineItem:addbenefittable:futtotal').value) != null){
                    var futuretotal = document.getElementById('page:form:pblock:benefitLineItem:addbenefittable:futtotal').value;
                    if(futuretotal==""||futuretotal=="-")
                    {
                        futuretotal=0;
                    }
                }
                if((document.getElementById('page:form:pblock:benefitLineItem:addbenefittable:achtotal').value) != null){
                    var achievedtotal = document.getElementById('page:form:pblock:benefitLineItem:addbenefittable:achtotal').value;
                    if(achievedtotal==""||achievedtotal=="-")
                    {
                        achievedtotal=0;
                    }
                }
                totalvalidatedamount = (parseInt(futuretotal) + parseInt(achievedtotal));
                if(totalvalidatedamount >1000) 
                {
                    document.getElementById("page:form:pblock:benifitSaveButton").disabled = true;
                    document.getElementById("page:form:pblock:benifitSaveButton").value = 'Saving...';
                    if(confirm("QIPP project benefits must be recorded in Kilo Euro (k€) units [ie.1 k€ = 1000€].\n\n Please correct the numbers if the benefits are not recorded in k€.\n\n Do You Want to Continue ? Press Ok to Proceed and Cancel to cancel.") == true){
                        cancelflg = "true";
                    }
                    else{
                        return false;
                        cancelflg = "false";
                        document.getElementById("page:form:pblock:benifitSaveButton").disabled = false;
                        document.getElementById("page:form:pblock:benifitSaveButton").value = 'Save & Close';
                    }
                }
                document.getElementById("page:form:pblock:benifitSaveButton").disabled = true;
                document.getElementById("page:form:pblock:benifitSaveButton").value = 'Saving...';
                doSubmit();
            }
            
            function SaveBenefits(){
                var errormsg = '{!benifitsErrorMessages}';
                if(totalvalidatedamount >1000 && cancelflg == "false"){
                    document.getElementById("page:form:pblock:benifitSaveButton").disabled = false;
                    document.getElementById("page:form:pblock:benifitSaveButton").value = 'Save & Close';
                }
                else if(totalvalidatedamount >1000 && cancelflg == "true"){
                    document.getElementById("page:form:pblock:benifitSaveButton").disabled = true;
                    document.getElementById("page:form:pblock:benifitSaveButton").value = 'Saving...';
                }
                    else if(errormsg == "false"){
                        document.getElementById("page:form:pblock:benifitSaveButton").disabled = true;
                        document.getElementById("page:form:pblock:benifitSaveButton").value = 'Saving...';
                    }else{
                        document.getElementById("page:form:pblock:benifitSaveButton").disabled = false;
                        document.getElementById("page:form:pblock:benifitSaveButton").value = 'Save & Close';
                    }
            } 
            
            function editvalidationamount(){
                
                if((document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:achtotal').value)!= null){
                    var editfuturetotal = document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:achtotal').value;
                    if(editfuturetotal==""|| editfuturetotal=="-")
                    {
                        editfuturetotal=0;
                    }
                }
                if((document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:futtotal').value)!= null){
                    var editachievedtotal = document.getElementById('page:form:pblock:pbeditbenf:benefitLineItemEdit:pbtableeditbenf:futtotal').value;
                    if(editachievedtotal=="" || editachievedtotal=="-")
                    {
                        editachievedtotal=0;
                    }
                }
                edittotalvalidatedamount = (parseInt(editfuturetotal) + parseInt(editachievedtotal));
                if(edittotalvalidatedamount >1000) 
                {
                    document.getElementById("page:form:pblock:pbeditbenf:pbeditbuttons:benifitEditSaveButton").disabled = true;
                    document.getElementById("page:form:pblock:pbeditbenf:pbeditbuttons:benifitEditSaveButton").value = 'Saving...';
                    if(confirm("QIPP project benefits must be recorded in Kilo Euro (k€) units [ie.1 k€ = 1000€].\n\n Please correct the numbers if the benefits are not recorded in k€.\n\n Do You Want to Continue ? Press Ok to Proceed and Cancel to cancel.") == true){
                        cancelflg = "true";
                    }
                    else{
                        return false;
                        cancelflg = "false";
                        document.getElementById("page:form:pblock:pbeditbenf:pbeditbuttons:benifitEditSaveButton").disabled = false;
                        document.getElementById("page:form:pblock:pbeditbenf:pbeditbuttons:benifitEditSaveButton").value = 'Save & Close';
                    }
                }
                
                document.getElementById("page:form:pblock:pbeditbenf:pbeditbuttons:benifitEditSaveButton").disabled = true;
                document.getElementById("page:form:pblock:pbeditbenf:pbeditbuttons:benifitEditSaveButton").value = 'Saving...';
                doeditSubmit();
            }
            
            function editSaveBenefits(){
                var errormsg = '{!benifitsErrorMessages}';
                if(edittotalvalidatedamount >1000 && cancelflg == "false"){
                    document.getElementById("page:form:pblock:pbeditbenf:pbeditbuttons:benifitEditSaveButton").disabled = false;
                    document.getElementById("page:form:pblock:pbeditbenf:pbeditbuttons:benifitEditSaveButton").value = 'Save & Close';
                }
                else if(edittotalvalidatedamount >1000 && cancelflg == "true"){
                    document.getElementById("page:form:pblock:pbeditbenf:pbeditbuttons:benifitEditSaveButton").disabled = true;
                    document.getElementById("page:form:pblock:pbeditbenf:pbeditbuttons:benifitEditSaveButton").value = 'Saving...';
                }
                    else if(errormsg == "false"){
                        document.getElementById("page:form:pblock:pbeditbenf:pbeditbuttons:benifitEditSaveButton").disabled = true;
                        document.getElementById("page:form:pblock:pbeditbenf:pbeditbuttons:benifitEditSaveButton").value = 'Saving...';
                    }else{
                        document.getElementById("page:form:pblock:pbeditbenf:pbeditbuttons:benifitEditSaveButton").disabled = false;
                        document.getElementById("page:form:pblock:pbeditbenf:pbeditbuttons:benifitEditSaveButton").value = 'Save & Close';
                    }
            } 
            
            
            function isNumberKey(evt)
            {
                
                var charCode = (evt.which) ? evt.which : event.keyCode
                if (charCode == 8 || charCode == 37) {
                    return true;
                } else if (charCode == 46 && j$(this).val().indexOf('.') != -1) {
                    alert("Enter Savings as Kilo Euros (k€)"); 
                    return false;
                } else if (charCode > 31 && charCode != 46 && (charCode < 48 || charCode > 57)) {
                    alert("Enter Savings as Kilo Euros (k€)"); 
                    return false;
                }
                if (charCode == 13)
                {
                    alert("Pressing Enter Key is Not Allowed"); 
                    return false;   
                }
                return true;
            }
            
            function preventEnterKey(evt)
            {
                var charCode = (evt.which) ? evt.which : event.keyCode
                if (charCode == 13)
                {
                    alert("Pressing Enter Key is Not Allowed"); 
                    return false;   
                } 
                return true; 
                
            }
            
            function GlobalBBG()
            {
               
                if(document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:defaultbg').value!= 'Global'){
                    
                    if(document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:1:EnterBG').value=='Global'){    
                    debugger;
                    var BBGDefaultopvalamt0=document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGopval').value;
                    var BBGDefaultfivalamt0=document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGfival').value;
                    var BBGDefaultprvalamt0=document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGprojval').value;
                    var BBGDefaultrlvalamt0=document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGrealval').value;
                    
                    var BBGDefaultopvalamt1=document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:1:BGopval').value;
                    
                    if(BBGDefaultopvalamt1=="")
                    {
                        BBGDefaultopvalamt1=0.0;
                        
                    }
                    var BBGDefaultfivalamt1=document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:1:BGfival').value;
                    if(BBGDefaultfivalamt1=="")
                    {
                        
                        BBGDefaultfivalamt1=0.0;
                    }
                    
                    var BBGDefaultprvalamt1=document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:1:BGpoval').value;
                    if(BBGDefaultprvalamt1=="")
                    {
                        BBGDefaultprvalamt1=0.0;
                        
                    }
                    var BBGDefaultrlvalamt1=document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:1:BGrlval').value;
                    if(BBGDefaultrlvalamt1=="")
                    {
                        BBGDefaultrlvalamt1=0.0;
                    }
                    
                    BBGDefaultopvalamt=(parseFloat(BBGDefaultopvalamt0) + parseFloat(BBGDefaultopvalamt1));
                    BBGDefaultfivalamt=(parseFloat(BBGDefaultfivalamt0) + parseFloat(BBGDefaultfivalamt1));
                    BBGDefaultprvalamt=(parseFloat(BBGDefaultprvalamt0) + parseFloat(BBGDefaultprvalamt1));
                    BBGDefaultrlvalamt=(parseFloat(BBGDefaultrlvalamt0) + parseFloat(BBGDefaultrlvalamt1));
                    
                    
                   
                    document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGopval').value=0.0;
                    document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:1:BGopval').value=BBGDefaultopvalamt.toFixed(1);
                    
                    document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGfival').value=0.0;
                    document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:1:BGfival').value=BBGDefaultfivalamt.toFixed(1);
                    
                    document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGprojval').value=0.0;
                    document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:1:BGpoval').value=BBGDefaultprvalamt.toFixed(1);
                    
                    document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGrealval').value=0.0;
                    document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:1:BGrlval').value=BBGDefaultrlvalamt.toFixed(1);
                    } 
                }
                
            }
            
            function BBGOPValidationAmount()
            {
                
                var eleAmount=0;
                var sumofBBGValamt1=0;
                var BBGDefaultvalamt=0;
                j$('.BBGOPtotal').each(function(index, ele){
                     eleAmount = parseFloat(j$(ele).val().replace(/,/g,"") || 0).toFixed(1);
                    sumofBBGValamt1 += parseFloat(j$(ele).val().replace(/,/g,"") || 0);
                     if(eleAmount!=0)
                        {
                            j$(ele).val(eleAmount);
                            
                        }
                         if(eleAmount==0){
                            j$(ele).val(eleAmount);
                        }
               
                });
                BBGDefaultvalamt={!bbgopvalamount};
                // BBGDefaultvalamt=document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGopval').value;
                document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGopval').value=((BBGDefaultvalamt)-(sumofBBGValamt1)).toFixed(1);
                // bbgreadonly();  
            }
            
            
            
            function BBGFIValidationAmount()
            {
               var eleAmount=0;
                var sumofBBGValamt1=0;
                var BBGDefaultvalamt=0;
                j$('.BBGFItotal').each(function(index, ele){
                     eleAmount = parseFloat(j$(ele).val().replace(/,/g,"") || 0).toFixed(1);
                    sumofBBGValamt1 += parseFloat(j$(ele).val().replace(/,/g,"") || 0);
                     if(eleAmount!=0)
                        {
                            j$(ele).val(eleAmount);
                            
                        }
                         if(eleAmount==0){
                            j$(ele).val(eleAmount);
                        }
               
                });
                BBGDefaultvalamt={!bbgfivalamount};
                // BBGDefaultvalamt=document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGfival').value;
                document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGfival').value=((BBGDefaultvalamt)-(sumofBBGValamt1)).toFixed(1);
                // bbgreadonly();  
            }
            function BBGPOValidationAmount()
            {
                
                var eleAmount=0;
                 var sumofBBGValamt1=0;
                var BBGDefaultvalamt=0;
                j$('.BBGPOtotal').each(function(index, ele){
                     eleAmount = parseFloat(j$(ele).val().replace(/,/g,"") || 0).toFixed(1);
                    sumofBBGValamt1 += parseFloat(j$(ele).val().replace(/,/g,"") || 0);
                     if(eleAmount!=0)
                        {
                            j$(ele).val(eleAmount);
                            
                        }
                         if(eleAmount==0){
                            j$(ele).val(eleAmount);
                        }
               
                });
                BBGDefaultvalamt={!bbgprvalamount};
                //BBGDefaultvalamt=document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGprojval').value;
                document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGprojval').value=((BBGDefaultvalamt)-(sumofBBGValamt1)).toFixed(1);
                // bbgreadonly();  
            }
            function BBGREValidationAmount()
            {
                
               var sumofBBGValamt1=0;
                var BBGDefaultvalamt=0;
                var eleAmount=0;
                j$('.BBGREtotal').each(function(index, ele){
                     eleAmount = parseFloat(j$(ele).val().replace(/,/g,"") || 0).toFixed(1);
                    sumofBBGValamt1 += parseFloat(eleAmount);
                    if(eleAmount!=0)
                        {
                            j$(ele).val(eleAmount);
                            
                        }
                         if(eleAmount==0){
                            j$(ele).val(eleAmount);
                        }
               
                });
                BBGDefaultvalamt={!bbgrelvalamount};
                //BBGDefaultvalamt=document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGrealval').value;
                document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGrealval').value=((BBGDefaultvalamt)-(sumofBBGValamt1)).toFixed(1);
                // bbgreadonly();  
            }
            function bbgreadonly()
            {
                if(document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGopval') != null){
                    document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGopval').readOnly=true;}
                
                if(document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGfival') != null){
                    document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGfival').readOnly=true;}
                
                if(document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGprojval') != null){
                    document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGprojval').readOnly=true;}
                
                if(document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGrealval') != null){
                    document.getElementById('page:form:pblock:bgGroupSection:pbTableMultipleBG:0:mainBGrealval').readOnly=true;}
            }
            
            function isNumberKeyBBGfi(evt)
            {
                var charCode = (evt.which) ? evt.which : event.keyCode
                
                if(({!bbgfivalamount}!=0)){
                    if (charCode == 8 || charCode == 37) {
                        return true;
                    } else if (charCode == 46 && j$(this).val().indexOf('.') != -1) {
                        alert("Enter Amount in Numbers Only"); 
                        return false;
                    } else if (charCode > 31 && charCode != 46 && (charCode < 48 || charCode > 57)) {
                        alert("Enter Amount in Numbers Only");
                        return false;
                    }
                    if (charCode == 13)
                    {
                        alert("Pressing Enter Key is Not Allowed"); 
                        return false;   
                    }
                }else { 
                    alert("BBG Validation Amount is 0,Amount cannot be Distributed");
                    return false;
                }return true;
            }
            
            function isNumberKeyBBGop(evt)
            {
                var charCode = (evt.which) ? evt.which : event.keyCode
                
                if(({!bbgopvalamount}!=0)){
                    if (charCode == 8 || charCode == 37) {
                        return true;
                    } else if (charCode == 46 && j$(this).val().indexOf('.') != -1) {
                        alert("Enter Amount in Numbers Only"); 
                        return false;
                    } else if (charCode > 31 && charCode != 46 && (charCode < 48 || charCode > 57)) {
                        alert("Enter Amount in Numbers Only");
                        return false;
                    }
                    if (charCode == 13)
                    {
                        alert("Pressing Enter Key is Not Allowed"); 
                        return false;   
                    }
                }else { 
                    alert("BBG Validation Amount is 0,Amount cannot be Distributed");
                    return false;
                }return true;
            } 
            
            function isNumberKeyBBGproj(evt)
            {
                var charCode = (evt.which) ? evt.which : event.keyCode
                
                if(({!bbgprvalamount}!=0)){
                    if (charCode == 8 || charCode == 37) {
                        return true;
                    } else if (charCode == 46 && j$(this).val().indexOf('.') != -1) {
                        alert("Enter Amount in Numbers Only"); 
                        return false;
                    } else if (charCode > 31 && charCode != 46 && (charCode < 48 || charCode > 57)) {
                        alert("Enter Amount in Numbers Only");
                        return false;
                    }
                    if (charCode == 13)
                    {
                        alert("Pressing Enter Key is Not Allowed"); 
                        return false;   
                    }
                }else { 
                    alert("BBG Validation Amount is 0,Amount cannot be Distributed");
                    return false;
                }return true;
            }
            
            function isNumberKeyBBGrel(evt)
            {
                var charCode = (evt.which) ? evt.which : event.keyCode
                
                if(({!bbgrelvalamount}!=0)){
                    if (charCode == 8 || charCode == 37) {
                        return true;
                    } else if (charCode == 46 && j$(this).val().indexOf('.') != -1) {
                        alert("Enter Amount in Numbers Only"); 
                        return false;
                    } else if (charCode > 31 && charCode != 46 && (charCode < 48 || charCode > 57)) {
                        alert("Enter Amount in Numbers Only");
                        return false;
                    } 
                    if (charCode == 13)
                    {
                        alert("Pressing Enter Key is Not Allowed"); 
                        return false;   
                    }
                }else { 
                    alert("BBG Validation Amount is 0,Amount cannot be Distributed");
                    return false;
                }return true;
            }
            
            function saveBBG()
            {
                if(confirm("If Benefits Added/Modified in the Benefit Section after Benefitting Distribution,then all the added Benefitting Businesss Groups will be deleted other than Default Benefitting Group.Please Make sure Benefits are freezed and add Benefit Distribution to the project.")==true)
                {
                    document.getElementById("page:form:pblock:bgGroupSection:saveBBG").disabled = true;
                    document.getElementById("page:form:pblock:bgGroupSection:saveBBG").value = 'Saving...';
                }
                else{
                    return false; 
                    document.getElementById("page:form:pblock:bgGroupSection:saveBBG").disabled = false;
                    document.getElementById("page:form:pblock:bgGroupSection:saveBBG").value = 'Save & Close';
                }
                doSave();
            }
            
            function SaveBBGVal()
            {
                document.getElementById("page:form:pblock:bgGroupSection:saveBBG").disabled = false;
                document.getElementById("page:form:pblock:bgGroupSection:saveBBG").value = 'Save & Close';
            }
            
            
            function saveprojredep()
            {
                     
                var oldprojredep=document.getElementById('page:form:pblock:oldprojredep').value;
                var selectvar = document.getElementById('idSpan').style.display;
                
                if(selectvar =='none' && oldprojredep=='Yes'){
                        
                         if(confirm(" Redeployment Opportunity has been changed from Yes to No. All the associated Redeployment Business Groups, Units and Redeplyment Description Will be deleted. ")==true)
                        {
                            document.getElementById("page:form:pblock:saveredep1").disabled = true;
                            document.getElementById("page:form:pblock:saveredep1").value = 'Saving...';
                        }
                        else{
                            return false; 
                            document.getElementById("page:form:pblock:saveredep1").disabled = false;
                            document.getElementById("page:form:pblock:saveredep1").value = 'Save & Close';
                        }
                    }
                       document.getElementById("page:form:pblock:saveredep1").disabled = true;
                       document.getElementById("page:form:pblock:saveredep1").value = 'Saving...';
                        doSaveredep();
            }
            
            
            function saveprojredepval()
            {
                document.getElementById("page:form:pblock:saveredep1").disabled = false;
                document.getElementById("page:form:pblock:saveredep1").value = 'Save & Close';
            }
            function savePrj(){
           // hideErrorMsg();
            saveProject();
        }

     function startProcess(){
            //$("#loading").show();
            j$("[id^=loading]").each(function(index, ele){
               j$(ele).show();
            });
        }
        
        function endProcess(){
            //$("#loading").hide();
            j$("[id^=loading]").each(function(index, ele){
                j$(ele).hide();
            });
        } 
            
            </script>
            
            
            <style>
                ul{color:red!important;}
                .messageText{color:red;}
                .custPopup{
                background-color: white;
                border-width: 2px;
                border-style: solid;
                z-index: 9999;
                left: 50%;
                padding:10px;
                position: fixed;
                /* These are the 3 css properties you will need to change so the popup 
                displays in the center of the screen. First set the width. Then set 
                margin-left to negative half of what the width is. You can add 
                the height property for a fixed size pop up if you want.*/
                width: 500px;
                margin-left: -250px;
                top:100px;
                }
                .custPopup2{
                background-color: white;
                border-width: 2px;
                border-style: solid;
                z-index: 9999;
                left: 50%;
                padding:10px;
                position: fixed;
                /* These are the 3 css properties you will need to change so the popup 
                displays in the center of the screen. First set the width. Then set 
                margin-left to negative half of what the width is. You can add 
                the height property for a fixed size pop up if you want.*/
                width: 200px;
                margin-left: -250px;
                top:100px;
                }
                .popupBackground{
                background-color:black;
                opacity: 0.20;
                filter: alpha(opacity = 20);
                position: fixed;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                z-index: 9998;
                }
                
                .BBGpopupBackground{
                background-color:black;
                opacity: 0.20;
                filter: alpha(opacity = 20);
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                z-index: 9998;
                }
                .noHeader{
                display:none;
                }
                .rowColor{
                background-color:#ffcccc;   
                font-weight:bold;
                }
                .BBGcustPopup{
                background-color: white;
                height:450px;
                width:1050px;
                border-width: 2px;
                border-style: solid;
                z-index: 9999;
                position: absolute;
                top:160px;
                left:150px;
                overflow-x:scroll;
                }
                .BAMpopupBackground{
                background-color:black;
                opacity: 0.20;
                filter: alpha(opacity = 20);
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left:0px;
                z-index: 9998;
                }
                
                
                .BAMcustPopup{
                background-color: white;
                border-width: 2px;
                border-style: solid;
                z-index: 9999;
                position: absolute;
                top:120px;
                left:170px;
                }
                
                .BenfpopupBackground{
                background-color:black;
                opacity: 0.20;
                filter: alpha(opacity = 20);
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left:0px;
                z-index: 9998;
                }
                
                .BenfcustPopup{
                background-color: white;
                height:510px;
                width:950px;
                border-width: 2px;
                border-style: solid;
                z-index: 9999;
                position: absolute;
                top:120px;
                left:150px;
                overflow-x:scroll;
                
                }
                
                /*  .editbenfpopupBackground{
                background-color:black;
                opacity: 0.20;
                filter: alpha(opacity = 20);
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left:0px;
                z-index: 9998;
                }
                
                .editbenfcustPopup{
                background-color: white;
                border-width: 2px;
                height:465px;
                width:852px;
                border-style: solid;
                z-index: 9999;
                position: absolute;
                top:120px;
                left:250px;
                }*/
                
                input::-webkit-input-placeholder { font-size: 7pt;}
                input::-moz-placeholder { font-size: 10pt; color:GrayText;}
                input:-ms-input-placeholder { font-size: 7pt;}
                
                .input-icon {
                position: relative;
                }
                
                .input-icon > i {
                position: absolute;
                display: block;
                transform: translate(0, -50%);
                top:45%;
                pointer-events: none;
                width: 25px;
                text-align: center;
                font-style: normal;
                z-index:9998;
                }
                
                .input-icon > input {
                padding-left: 25px;
                padding-right: 0;
                }
                select {
                border: 1px solid #111;
                background: transparent;
                width: 200px;
                padding: 2px;
                font-size: 12px;
                border: 1px solid #ccc;
                height: 24px;
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
                }
                .helpText{
                z-index:10000;
                }
                
                /*--Added by Rahul(15-11-2016)--Start--*/
                #calMonthPicker, #calYearPicker{
                width: auto;
                }
                /*--Added by Rahul(15-11-2016)--End--*/
                
                .inlineEditUndo{
                display:none;
                }     
                
                /*  Scroll to the top
                its position to fixed and moving it to the bottom right side of the screen. I’ve also given it a semi-transparent background and finally hidden it. To make it stand out a little more, I’ve also given it a hover effect to darken the background a little.
                */
                #return-to-top {
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: rgb(0, 0, 0);
                background: rgba(0, 0, 0, 0.7);
                width: 50px;
                height: 50px;
                display: block;
                text-decoration: none;
                -webkit-border-radius: 35px;
                -moz-border-radius: 35px;
                border-radius: 35px;
                display: none;
                -webkit-transition: all 0.3s linear;
                -moz-transition: all 0.3s ease;
                -ms-transition: all 0.3s ease;
                -o-transition: all 0.3s ease;
                transition: all 0.3s ease;
                }
                
                #return-to-top i {
                color: #fff;
                margin: 0;
                position: relative;
                left: 16px;
                top: 13px;
                font-size: 19px;
                -webkit-transition: all 0.3s ease;
                -moz-transition: all 0.3s ease;
                -ms-transition: all 0.3s ease;
                -o-transition: all 0.3s ease;
                transition: all 0.3s ease;
                }
                #return-to-top:hover {
                background: rgba(18, 65, 145, 0.80);
                }
                #return-to-top:hover i {
                color: #fff;
                top: 5px;
                }
                .LeadSponsorEqualPopup{
                background-color: white;
                border-width: 2px;
                border-style: solid;
                z-index: 9999;
                left: 38%;
                padding: 10px;
                position: fixed;
                width: 310px !important;
                top: 32%;     
                }
                
                #loading{
                   width: 100%;
                   height: 100%;
                   top: 0;
                   left: 0;
                   position: fixed;
                   display: block;
                   opacity: 0.5;
                   background-color: #E1E8EB;
                   z-index: 99;
                   text-align: center;
                }
        
            #loading-image{
                  position: absolute;
                  top: 50%;
                  left: 50%;
                  z-index: 100;
                 }        
                
            </style>
            <apex:form id="form">
                
                <apex:actionFunction name="saveProject" action="{!save}" reRender="errorblock,projLeadSponsorEqualPopup" oncomplete="endProcess();"/>
                
                 <div id="loading" style="display:none;">
                    <img id="loading-image" src="https://raw.githubusercontent.com/ressio/lazy-load-xt/master/src/loading.gif" alt="Loading..." />
                </div>
                
                <div class="listHoverLinks" style="visibility: visible;">
                    <a class="linklet" href="#page:form:pblock:businessActivityDetails" id="businessActivityDetails_link" data-uidsfdc="26"><span class="listTitle">Business Activity Mapping </span></a>
                    <span class="pipe"> | </span>
                    <a class="linklet" href="#page:form:pblock:benfitSec" id="benfitSec_link" data-uidsfdc="26"><span class="listTitle">Benefits</span></a>
                    <span id = "BenefitDistripipe" class="pipe" style="display:none"> | </span>
                    <a class="linklet" style="display:none" href="#page:form:pblock:benefitingBusinessGrp" id="benefitingBusinessGrp_link" data-uidsfdc="26"><span class="listTitle">Benefit Distribution</span></a>
                    <span class="pipe"> | </span>
                    <a class="linklet" href="#page:ProcessSteps" id="ProcessSteps_link" data-uidsfdc="26"><span class="listTitle">Approval History</span></a>         
                    <span class="pipe"> | </span>
                    <a class="linklet" href="#page:relatedtasks" id="relatedtasks_link" data-uidsfdc="26"><span class="listTitle">Tasks</span></a>            
                    <span class="pipe"> | </span>
                    <a class="linklet" href="#page:notesandattach" id="notesandattach_link" data-uidsfdc="26"><span class="listTitle">Notes &amp; Attachments</span></a>          
                    <span class="pipe"> | </span>
                    <a class="linklet" href="#page:projecthistory" id="projecthistory_link" data-uidsfdc="26"><span class="listTitle">QIPP Project History</span></a>            
                </div>
                <apex:pageBlock id="pblock" mode="inlineEdit">
                    <apex:variable id="varp" value="{!$Profile.Name}" var="p"/>
                    <apex:pagemessages id="errorblock" rendered="{!IF(displayPopupBenf==false && displayPopupeditBenf==false && bbgErrorMessages==false && displayPopupprojredepDist==false && projectErrorMessages==true,true,false)}" />
                    <apex:pageBlockButtons >
                        <apex:image id="lockIcon" value="/img/lock_small.gif" alt="Lock" width="16" height="16" title="Lock" rendered="{!if(($Profile.Name =='Nokia QIPP Project Viewer') || (recIsLocked==false),false,true)}" /> 
                        <apex:actionRegion >
                         <!--   <apex:commandButton id="saveButton" action="{!save}" Value="Save" title="Save" style="display:none">-->
                          <apex:commandButton id="saveButton" onclick="startProcess(); savePrj(); return false;" Value="Save" title="Save" style="display:none">
                            </apex:commandButton>
                        </apex:actionRegion>
                        <apex:commandButton id="cancelButton" onclick="startProcess(); resetInlineEdit();" value="Cancel" action="{!ValidationCancel}" title="Cancel" style="display:none" oncomplete="endProcess();" />
                        <apex:commandButton id="unlockRecord" action="{!unlockRecord}" value="Unlock Record" title="Unlock Record" rendered="{!if(($UserRole.Name =='QIPP Admin' || $Profile.Name =='System Administrator' && recIsLocked==true),true,false)}" onclick="startProcess();" oncomplete="endProcess();" />
                        <!--<apex:commandButton id="editButton"  Value="Edit" action="{!edit}" title="Edit" rerender="errorblock" rendered="{!IF(($Profile.Name !='Nokia QIPP Project Viewer'),true,false)}"/>-->
                        <apex:commandButton id="editButton"  Value="Edit" action="{!edit}" title="Edit" rerender="errorblock" rendered="{!IF((($Profile.Name !='Nokia QIPP Project Viewer') && (projState != 'Complete' || projState !='Closed') && recIsLocked==false),true,false)}" onclick="startProcess();" oncomplete="endProcess();"/>
                        <apex:commandButton id="deleteButton" value="Delete" title="Delete" action="{!deleteRecord}" rendered="{!IF((($Profile.Name =='System Administrator') && ($Profile.Name !='Nokia QIPP Project Viewer') || ($Profile.Name =='Nokia QIPP Project Lead' && $UserRole.Name =='QIPP Portfolio Manager') || ($Profile.Name =='Nokia QIPP Project Lead' && $UserRole.Name =='QIPP Admin')), true , false)}" onclick="startProcess();"/>
                        <apex:commandButton id="cloneButton" action="{!cloneProject}" Value="Clone" title="Clone" rendered="{!IF(($Profile.Name !='Nokia QIPP Project Viewer'),true,false)}" onclick="startProcess();" oncomplete="endProcess();"/>
                        <apex:commandButton id="shareButton" action="{!URLFOR($Action.QIPP_Project__c.Share,Id)}" value="Sharing" title="Sharing" rendered="{!IF(($Profile.Name !='Nokia QIPP Project Viewer'),true,false)}" onclick="startProcess();" oncomplete="endProcess();"/>
                        <!--<apex:commandButton id="benefitButton" action="{!addBenefits}" value="Benefits" title="Benefits" rendered="{!IF((($Profile.Name !='Nokia QIPP Project Viewer') && recIsLocked == false),true,false)}"/>-->
                        
                        <!--<apex:commandButton id="benefitButton" action="{!URLFOR($Action.QIPP_Project__c.Benefit, Id)}" value="Benefits" title="Benefits" rendered="{!IF((($Profile.Name !='Nokia QIPP Project Viewer') && recIsLocked == false),true,false)}"/>-->
                        
                        <apex:commandButton id="approvalButton" action="{!reqApproval}" rerender="approvepopup,errorblock" Value="Request Phase Completion Approval" title="Request Phase Completion Approval" rendered="{!if( ($Profile.Name =='Nokia QIPP Project Viewer') || (projState=='Complete' || projState=='Closed' &&  (controlStatus=='Completed' || controlStatus=='Delayed') || (recIsLocked==true)),false,true)}" onclick="startProcess();" oncomplete="endProcess();"/>
                        
                        <!--<apex:inputFile value="{!csvFileBody}" filename="{!csvAsString}" />
<apex:commandButton value="Import Project" action="{!importCSVFile}" immediate="true"/>-->
                    </apex:pageBlockButtons>   
                    <!-- Section 1 -->
                    
                    <apex:pageBlockSection id="pbsection1" columns="2" title="Standard Project Fields" collapsible="false">
                        <apex:pageBlockSectionItem id="projName" helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Name_Succinct__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Project_Name_Succinct__c.Label}" for="projName"/>           
                            <apex:outputField id="projName" value="{!proj.Project_Name_Succinct__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/>
                                <apex:outputPanel rendered="{!LEN(ProjNameError)>0}"><div class="errorMsg">{!GenericError}</div></apex:outputPanel> 
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="bBG" helpText="{!$ObjectType.QIPP_Project__c.fields.Portfolio_BU__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Portfolio_BU__c.Label}" for="bBG"/>
                            <apex:outputText id="bBG" value="{!proj.Portfolio_BU__c}"/>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="projLead" helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Lead__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Project_Lead__c.Label}" for="projLead"/>
                            <apex:outputField id="projLead" value="{!proj.Project_Lead__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/><apex:outputText value="{!GenericError}" rendered="{!LEN(ProjLeadError)>0}" style="color:#d74c3b"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="bBU" helpText="{!$ObjectType.QIPP_Project__c.fields.Project_BL__c.inlineHelpText}">                
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Project_BL__c.Label}" for="bBU"/>
                            <apex:outputText id="bBU" value="{!proj.Project_BL__c}"/>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="portfolioName" helpText="{!$ObjectType.QIPP_Project__c.fields.Portfolio_Name__c.inlineHelpText}">            
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Portfolio_Name__c.Label}" for="portfolioName"/>
                            <apex:outputField id="portfolioName" value="{!proj.Portfolio_Name__c}">
                                <apex:inlineEditSupport rendered="false"/>
                            </apex:outputField>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="bBL" helpText="{!$ObjectType.QIPP_Project__c.fields.Benefitting_Project_BL_Level_4_Org__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Benefitting_Project_BL_Level_4_Org__c.Label}" for="portfolioDesc"/>
                            <apex:outputText id="bBL" value="{!proj.Benefitting_Project_BL_Level_4_Org__c}" style="width:300px;display:inline-block"/>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="projStateItem" helpText="{!$ObjectType.QIPP_Project__c.fields.Project_State__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Project_State__c.Label}" for="projState"/>
                            <apex:outputField id="projState" value="{!proj.Project_State__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Lead_Business_Grp__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Project_Lead_Business_Grp__c.Label}" for="PLBG"/>
                            <apex:outputText id="PLBG" value="{!proj.Project_Lead_Business_Grp__c}"/>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="cemtID" helpText="{!$ObjectType.QIPP_Project__c.fields.CEMT_ID__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.CEMT_ID__c.Label}" for="cemtID"/>
                            <apex:outputField id="cemtID" value="{!proj.CEMT_ID__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/><apex:outputText value="Error: Blank space not accepted, please use Not Applicable instead." rendered="{!LEN(CEMT_MeasureError)>0}" style="color:#d74c3b"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Lead_Business_Unit__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Project_Lead_Business_Unit__c.Label}" for="PLBU"/>
                            <apex:outputText id="PLBU" value="{!proj.Project_Lead_Business_Unit__c}"/>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="portfolioDesc" helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Description_Detailed__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Project_Description_Detailed__c.Label}" for="projectDesc"/>
                            <apex:outputField id="portfolioDesc" value="{!proj.Project_Description_Detailed__c}" style="width:590px;display:inline-block;word-break:break-all">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/><apex:outputText value="{!GenericError}" rendered="{!LEN(ProjDescError)>0}" style="color:#d74c3b"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Lead_Business_Line__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Project_Lead_Business_Line__c.Label}" for="PLBL"/>
                            <apex:outputText id="PLBL" value="{!proj.Project_Lead_Business_Line__c}"/>
                        </apex:pageBlockSectionItem>
                    </apex:pageBlockSection>
                    
                    <!-- Section 2-->
                    
                    <apex:pageBlockSection id="pbsection2" columns="3" title="DMAIC Specific Fields" collapsible="false">
                            
                        <apex:outputText rendered="{!IF(proj.Project_Lead__c == proj.Belt_Project_Sponsor__c,true,false)}">
                            <font size="2" style="color:red">{!$Label.QIPP_Lead_and_Sponsor_is_Equal_Msg}</font>
                            </apex:outputText>
                            <apex:outputText rendered="{!IF(proj.Project_Lead__c == proj.Belt_Project_Sponsor__c,true,false)}"></apex:outputText>
                        <apex:outputText rendered="{!IF(proj.Project_Lead__c == proj.Belt_Project_Sponsor__c,true,false)}"></apex:outputText>
        
                            
                            <apex:pageBlockSectionItem id="bcandment" labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.Belt_Candidate_Mentor__c.inlineHelpText}">
                            <apex:outputLabel value="Project Mentor" for="bcandment"/>
                            <apex:outputField id="bcandment" value="{!proj.Belt_Candidate_Mentor__c}"  style="width:130px">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!IF(And(phasecompleted != 'Define',phasecompleted !=  'Measure',phasecompleted !=  'Analyze',phasecompleted !=  'Improve',phasecompleted !=  'Control',recIsLocked!=true, enableInlineEdit), TRUE, FALSE)}" resetFunction="resetInlineEdit"/><apex:outputText value="{!GenericError}" rendered="{!LEN(ProjMentError)>0}" style="color:#d74c3b"/>
                            </apex:outputfield>
                            
                        </apex:pageBlockSectionItem>            
                        <apex:pageBlockSectionItem id="bpsponsor" datastyle="width:200px;display:inline-block" labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.Belt_Project_Sponsor__c.inlineHelpText}">
                            <apex:outputLabel value="Project Sponsor" for="bpsponsor"/>
                            <apex:outputField id="bpsponsor" value="{!proj.Belt_Project_Sponsor__c}"  style="width:130px">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!IF(And(phasecompleted != 'Define',phasecompleted !=  'Measure',phasecompleted !=  'Analyze',phasecompleted !=  'Improve',phasecompleted !=  'Control',recIsLocked!=true, enableInlineEdit), TRUE, FALSE)}" resetFunction="resetInlineEdit"/><apex:outputText value="{!GenericError}" rendered="{!LEN(ProjSponsError)>0}" style="color:#d74c3b"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>            
                        <apex:pageBlockSectionItem id="Beltprjtyp" datastyle="width:230px;display:inline-block" labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.Belt_Project_Type__c.inlineHelpText}">
                            <apex:outputLabel value="Project Type" for="Beltprjtyp"/>
                            <apex:outputField id="Beltprjtyp" value="{!proj.Belt_Project_Type__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/><apex:outputText value="{!GenericError}" rendered="{!LEN(projtypeError)>0}" style="color:#d74c3b"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="bprojchamp" labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.Belt_Project_Champion__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Belt_Project_Champion__c.Label}" for="bprojchamp"/>
                            <apex:outputField id="bprojchamp" value="{!proj.Belt_Project_Champion__c}"  style="width:130px">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/><apex:outputText value="{!GenericError}" rendered="{!LEN(ProjChampError)>0}" style="color:#d74c3b"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.Finance_Approver__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Finance_Approver__c.Label}" for="finapprover"/>
                            <apex:outputField id="finapprover" value="{!proj.Finance_Approver__c}"  style="width:130px">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="mentorCert" labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.Mentor_Certificate__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Mentor_Certificate__c.Label}" for="mentorCert"/>
                            <apex:outputField id="mentorCert" value="{!proj.Mentor_Certificate__c}"   style="width:230px">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/><apex:outputText value="{!GenericError}" rendered="{!LEN(MentorCertError)>0}" style="color:#d74c3b"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="bumbb" labelStyle="width:40%" helpText="Business Group Master Black Belt(BG-MBB) from the benefitting organization will be overseeing your project. This is dynamically updated based on the selected portfolio.">
                            <a id="theLink" target="_new" name="theLink" style="color: #4a4a56" href="https://workspaces-emea.int.nokia.com/sites/L6S/Lists/L6S%20Contacts/">Business Group Master Black Belt</a>
                            <apex:outputField id="bumbb" value="{!proj.Business_Unit_Master_Black_Belt__c}"  style="width:130px">
                                <apex:inlineEditSupport rendered="false" />
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.Belt_Assigned__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Belt_Assigned__c.Label}" for="L6SBA"/>
                            <apex:outputField id="L6SBA" value="{!proj.Belt_Assigned__c}" style="width:130px">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.Belt_Project_Phase__c.inlineHelpText}">
                            <apex:outputLabel value="Project Phase" for="BeltProjPhase"/>
                            <apex:outputText id="BeltProjPhase" value="{!proj.Belt_Project_Phase__c}" style="width:173px"/>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="DDDPlan" labelStyle="width:23%" helpText="{!$ObjectType.QIPP_Project__c.fields.DMAIC_Define__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.DMAIC_Define__c.Label}" for="DDPlan" style="color:#124191"/>
                            <apex:outputField id="DDPlan" value="{!proj.DMAIC_Define__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if(And(recIsLocked!=true,phasecompleted != 'Define',phasecompleted !=  'Measure',phasecompleted !=  'Analyze',phasecompleted !=  'Improve',phasecompleted !=  'Control', enableInlineEdit), true, FALSE)}" resetFunction="resetInlineEdit"/><apex:outputText value="{!GenericError}" rendered="{!LEN(DDPlanError)>0}" style="color:#d74c3b"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="DForecastItem" dataStyle="width:10%" labelStyle="width:23%" helpText="{!$ObjectType.QIPP_Project__c.fields.Define_Date_Forecast__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Define_Date_Forecast__c.Label}" for="DDforecast" style="color:#00c9ff"/>
                            <apex:outputField id="DForecast" value="{!proj.Define_Date_Forecast__c}" >
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!IF(((defineStatus != 'Delayed' && recIsLocked!=true && enableInlineEdit) && (defineStatus != 'Completed' && recIsLocked!=true && enableInlineEdit)),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem dataStyle="width:10%" labelStyle="width:23%" helpText="{!$ObjectType.QIPP_Project__c.fields.Define_Status__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Define_Status__c.Label}" for="DStatus"/>
                            <apex:outputText id="DStatus" value="{!proj.Define_Status__c}" style="width:230px"/>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="DDMPlan" dataStyle="width:10%" labelStyle="width:23%" helpText="{!$ObjectType.QIPP_Project__c.fields.DMAIC_Measure__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.DMAIC_Measure__c.Label}" for="DMPlan" style="color:#124191"/>
                            <apex:outputField id="DMPlan" value="{!proj.DMAIC_Measure__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if(And(recIsLocked!=true,phasecompleted != 'Define',phasecompleted !=  'Measure',phasecompleted !=  'Analyze',phasecompleted !=  'Improve',phasecompleted !=  'Control', enableInlineEdit),true,false)}" resetFunction="resetInlineEdit"/><apex:outputText value="{!GenericError}" rendered="{!LEN(MDPlanError)>0}" style="color:#d74c3b"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem dataStyle="width:10%" labelStyle="width:23%" helpText="{!$ObjectType.QIPP_Project__c.fields.Measure_Date_Forecast__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Measure_Date_Forecast__c.Label}" for="DMforecast" style="color:#00c9ff"/>
                            <apex:outputField id="DMforecast" value="{!proj.Measure_Date_Forecast__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!IF(((measureStatus != 'Delayed' && recIsLocked!=true && enableInlineEdit) && (measureStatus != 'Completed' && recIsLocked!=true && enableInlineEdit)),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="width:23%" helpText="{!$ObjectType.QIPP_Project__c.fields.Measure_Status__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Measure_Status__c.Label}" for="MStatus"/>
                            <apex:outputText id="MStatus" value="{!proj.Measure_Status__c}" style="width:230px"/>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="DDAPlan" labelStyle="width:23%" helpText="{!$ObjectType.QIPP_Project__c.fields.DMAIC_Analyze__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.DMAIC_Analyze__c.Label}" for="DAPlan" style="color:#124191"/>
                            <apex:outputField id="DAPlan" value="{!proj.DMAIC_Analyze__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if(And(recIsLocked!=true,phasecompleted != 'Define',phasecompleted !=  'Measure',phasecompleted !=  'Analyze',phasecompleted !=  'Improve',phasecompleted !=  'Control', enableInlineEdit),true,false)}" resetFunction="resetInlineEdit"/><apex:outputText value="{!GenericError}" rendered="{!LEN(ADPlanError)>0}" style="color:#d74c3b"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="width:23%" helpText="{!$ObjectType.QIPP_Project__c.fields.Analyze_Date_Forecast__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Analyze_Date_Forecast__c.Label}" for="DAforecast" style="color:#00c9ff"/>
                            <apex:outputField id="DAforecast" value="{!proj.Analyze_Date_Forecast__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!IF(((analyzeStatus != 'Delayed' && recIsLocked!=true && enableInlineEdit) && (analyzeStatus != 'Completed' && recIsLocked!=true && enableInlineEdit)),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="width:23%;" helpText="{!$ObjectType.QIPP_Project__c.fields.Analyze_Status__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Analyze_Status__c.Label}" for="AStatus"/>
                            <apex:outputText id="AStatus" value="{!proj.Analyze_Status__c}" style="width:230px"/>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="DDIplan" labelStyle="width:23%" helpText="{!$ObjectType.QIPP_Project__c.fields.DMAIC_Improve__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.DMAIC_Improve__c.Label}" for="DIPlan" style="color:#124191"/>
                            <apex:outputField id="DIPlan" value="{!proj.DMAIC_Improve__c}">            
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if(And(recIsLocked!=true,phasecompleted != 'Define',phasecompleted !=  'Measure',phasecompleted !=  'Analyze',phasecompleted !=  'Improve',phasecompleted !=  'Control', enableInlineEdit),true,false)}" resetFunction="resetInlineEdit"/><apex:outputText value="{!GenericError}" rendered="{!LEN(IDPlanError)>0}" style="color:#d74c3b"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="" helpText="{!$ObjectType.QIPP_Project__c.fields.Improve_Design_Date_Forecast__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Improve_Design_Date_Forecast__c.Label}" for="DIforecast" style="display:inline-block;width:200px;color:#00c9ff"/>
                            <apex:outputField id="DIforecast" value="{!proj.Improve_Design_Date_Forecast__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!IF((improveStatus != 'Delayed' && recIsLocked!=true && enableInlineEdit) && (improveStatus != 'Completed' && recIsLocked!=true && enableInlineEdit),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>            
                        <apex:pageBlockSectionItem labelStyle="width:150px;display:inline-block" helpText="{!$ObjectType.QIPP_Project__c.fields.Improve_Status__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Improve_Status__c.Label}" for="IStatus"/>
                            <apex:outputText id="IStatus" value="{!proj.Improve_Status__c}" style="width:230px"/>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="DDCPlan" labelStyle="width:23%" helpText="{!$ObjectType.QIPP_Project__c.fields.DMAIC_Control__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.DMAIC_Control__c.Label}" for="DCPlan" style="color:#124191"/>
                            <apex:outputField id="DCPlan" value="{!proj.DMAIC_Control__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if(And(recIsLocked!=true,phasecompleted != 'Define',phasecompleted !=  'Measure',phasecompleted !=  'Analyze',phasecompleted !=  'Improve',phasecompleted !=  'Control', enableInlineEdit),true,false)}" resetFunction="resetInlineEdit"/><apex:outputText value="{!GenericError}" rendered="{!LEN(CDPlanError)>0}" style="color:#d74c3b"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="width:23%" helpText="{!$ObjectType.QIPP_Project__c.fields.Control_Verify_Date_Forecast__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Control_Verify_Date_Forecast__c.Label}" for="DCforecast" style="color:#00c9ff"/>
                            <apex:outputField id="DCforecast" value="{!proj.Control_Verify_Date_Forecast__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!IF((controlStatus != 'Delayed' && recIsLocked!=true && enableInlineEdit) && (controlStatus != 'Completed' && recIsLocked!=true && enableInlineEdit),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="width:23%" helpText="{!$ObjectType.QIPP_Project__c.fields.Control_Status__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Control_Status__c.Label}" for="CStatus" />
                            <apex:outputText id="CStatus" value="{!proj.Control_Status__c}" style="width:230px"/>
                        </apex:pageBlockSectionItem>
                        
                        <apex:outputPanel id="projLeadSponsorEqualPopup">
                            <apex:outputPanel id="popupLeadSponsorEqual" styleClass="BenfpopupBackground" layout="block" rendered="{!projLeadSponsorEqual}" />
                            <apex:outputPanel styleClass="LeadSponsorEqualPopup" layout="block" rendered="{!projLeadSponsorEqual}">
                    
                               <apex:pageBlockSection >
                                    <apex:pageBlockSectionItem id="projLeadSponsorEqual">
                                        <apex:outputLabel value="{!$Label.QIPP_Lead_and_Sponsor_is_Equal_Msg}" style="width: 300px;display: inline-block;text-align: left;"/>
                                        <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
                                    </apex:pageBlockSectionItem>
                                </apex:pageBlockSection>
                                <div style="text-align:center;margin-top: 8px;">
                                    <apex:commandButton id="btnSaveLeadSponsorEqual" value="OK" action="{!save}" reRender="errorblock,projLeadSponsorEqualPopup"/>    
                                    <apex:commandButton id="btnCancelLeadSponsorEqual" value="Cancel" action="{!closeLeadSponsorEqualPopup}" reRender="projLeadSponsorEqualPopup"/>
                                </div>             
                            </apex:outputPanel>
                       </apex:outputPanel>
                        
                    </apex:pageBlockSection>
                    
                    <!-- Section 3 -->
                    <apex:pageBlockSection id="pbsection3" columns="3" title="Additional Project Fields" collapsible="false" >
                        <apex:pageBlockSectionItem labelStyle="width:40%" dataStyle="width:290px;display:inline-block;word-break:break-all" helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Document__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Project_Document__c.Label}" for="ProjDoc"/>
                            <apex:outputField id="ProjDoc" value="{!proj.Project_Document__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/><apex:outputText value="Error: Enter a valid url where project doc is stored" rendered="{!LEN(projDocumentError)>0}" style="color:#d74c3b"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="PlanStartDt" dataStyle="width:10%" labelStyle="width:160px" helpText="{!$ObjectType.QIPP_Project__c.fields.Planned_Start_Date__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Planned_Start_Date__c.Label}" for="PlanStartDt" style="width:150px;display:inline-block"/>
                            <apex:outputField id="PlanStartDt" value="{!proj.Planned_Start_Date__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!IF(And(phasecompleted != 'Define',phasecompleted !=  'Measure',phasecompleted !=  'Analyze',phasecompleted !=  'Improve',phasecompleted !=  'Control',recIsLocked!=true, enableInlineEdit), TRUE, FALSE)}" resetFunction="resetInlineEdit"/>
                            </apex:outputField>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="CompDtPlanned" helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Completion_Date_Target__c.inlineHelpText}">
                            <apex:outputLabel value="Completion Date - Planned" for="CompDtPlanned" style="width:150px;display:inline-block"/>
                            <apex:outputField id="CompDtPlanned" value="{!proj.Project_Completion_Date_Target__c}"> 
                                <apex:inlineEditSupport rendered="false"/>
                            </apex:outputField>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="Methodology" labelStyle="width:40%" rendered="{!IF(And(phasecompleted != 'Define',phasecompleted !=  'Measure',phasecompleted !=  'Analyze',phasecompleted !=  'Improve',phasecompleted !=  'Control'), TRUE, FALSE)}" helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Type__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Project_Type__c.Label}" for="Methodology"/>
                            <apex:outputField id="Methodology" value="{!proj.Project_Type__c}"   style="width:173px">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="Methodology_RO" labelStyle="width:40%" rendered="{!IF(OR(phasecompleted == 'Define',phasecompleted == 'Measure',phasecompleted == 'Analyze',phasecompleted == 'Improve',phasecompleted == 'Control'), TRUE, FALSE)}" helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Type__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Project_Type__c.Label}"/>
                            <apex:outputText value="{!proj.Project_Type__c}" />
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="" helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Start_Date__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Project_Start_Date__c.Label}" for="ProjStartDtActl"/>
                            <apex:outputField id="ProjStartDtActl" value="{!proj.Project_Start_Date__c}">
                                <apex:inlineEditSupport rendered="false"/>
                            </apex:outputField>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="itemforcast" labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Completion_Date_Forecast__c.inlineHelpText}">
                            <apex:outputLabel value="Completion Date - Forecast" for="forecast"/>
                            <apex:outputField id="forecast" value="{!proj.Project_Completion_Date_Forecast__c}">
                                <apex:inlineEditSupport rendered="false"/>
                            </apex:outputField>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.MO_Site__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.MO_Site__c.Label}" for="MOSite"/>
                            <apex:outputField id="MOSite" value="{!proj.MO_Site__c}"  style="width:173px">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="width:40%">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Project_Created_Date__c.Label}" for="ProjCreDt"/>
                            <apex:outputField id="ProjCreDt" value="{!proj.Project_Created_Date__c}" style="width:200px;display:inline-block">
                                <apex:inlineEditSupport rendered="false"/>
                            </apex:outputField>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Completion_Date_Actual__c.inlineHelpText}">
                            <apex:outputLabel value="Completion Date - Actual" for="Actual"/>
                            <apex:outputField id="Actual" value="{!proj.Project_Completion_Date_Actual__c}">
                                <apex:inlineEditSupport rendered="false"/>
                            </apex:outputField>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.Quality_Award_Project__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Quality_Award_Project__c.Label}" for="QtyAwardProj"/>
                            <apex:outputText id="QtyAwardProj" value="{!proj.Quality_Award_Project__c}"  style="width:173px">
                            </apex:outputText>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem dataStyle="width:10%" labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Flex_Field_1__c.inlineHelpText}">
                            <apex:outputLabel value="Project Flex Field" for="ProjFlexField1"/>
                            <apex:outputField id="ProjFlexField1" value="{!proj.Project_Flex_Field_1__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem datastyle="width:200px;display:inline-block" labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.DI_State__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.DI_State__c.Label}" for="DIState"/>
                            <apex:outputField id="DIState" value="{!proj.DI_State__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem helpText="{!$ObjectType.QIPP_Project__c.fields.Permission_to_use_Belt_Info__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Permission_to_use_Belt_Info__c.Label}" for="PermBeltInfo" style="width:190px;Display:Inline-Block"/>
                            <apex:outputText id="PermBeltInfo" value="{!proj.Permission_to_use_Belt_Info__c}" style="width:173px">
                            </apex:outputText>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem datastyle="width:200px;word-break:break-all" labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.Progress_To_Date__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Progress_To_Date__c.Label}" for="ptodate"/>
                            <apex:outputField id="ptodate" value="{!proj.Progress_To_Date__c}">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem datastyle="width:200px;word-break:break-all" labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.Next_Steps__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Next_Steps__c.Label}" for="nextStep"/>
                            <apex:outputField id="nextStep" value="{!proj.Next_Steps__c}" style="width: 185px; height: 30px">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        
                        <apex:pageBlockSectionItem helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Member1__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Project_Member1__c.Label}" for="PM1"/>
                            <apex:outputField id="nextStep" value="{!proj.Project_Member1__c}" style="width: 185px; height: 30px">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem datastyle="width:200px;display:inline-block;word-break:break-all" labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Member2__c.inlineHelpText}">
                            <apex:outputLabel value="{!$ObjectType.QIPP_Project__c.fields.Project_Member2__c.Label}" for="PM2"/>
                            <apex:outputField id="nextStep" value="{!proj.Project_Member2__c}" style="width: 185px; height: 30px">
                                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton,deleteButton,cloneButton,shareButton,approvalButton" event="ondblclick" changedStyleClass="myBoldClass" rendered="{!if((enableInlineEdit) && (recIsLocked==false),true,false)}" resetFunction="resetInlineEdit"/>
                            </apex:outputfield>
                        </apex:pageBlockSectionItem>
                        
                        <apex:pageBlockSectionItem labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.CreatedById.inlineHelpText}">
                            <apex:outputLabel value="Created By" for="createdBy"/>                
                            <apex:outputField id="createdBy" value="{!proj.CreatedById}" style="width: 185px; height: 30px"/>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.CreatedById.inlineHelpText}">
                            <apex:outputLabel value="Created Date" for="createdDate"/>                
                            <apex:outputField id="createdDate" value="{!proj.CreatedDate}" style="width: 185px; height: 30px"/>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.LastModifiedById.inlineHelpText}">
                            <apex:outputLabel value="Last Modified By" for="lastmodifiedBy"/>                
                            <apex:outputField id="lastmodifiedBy" value="{!proj.LastModifiedById}" style="width: 185px; height: 30px"/>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem labelStyle="width:40%" helpText="{!$ObjectType.QIPP_Project__c.fields.LastModifiedDate.inlineHelpText}">
                            <apex:outputLabel value="Last Modified Date" for="lastmodifiedDate"/>                
                            <apex:outputField id="lastmodifiedDate" value="{!proj.LastModifiedDate}" style="width: 185px; height: 30px"/>
                        </apex:pageBlockSectionItem>
                    </apex:pageBlockSection>
                    
                    <!--</apex:pageBlock> -->
                    <!-- Benefit Creation -->
                    <!-- Added by Rahul(23-08-2016)--Start -->
                    <apex:actionFunction name="refreshBAMSection" action="{!callDummy}" rerender="opBAM,businessActivityDetails" oncomplete="closeBAMSection();myTimeOut();" />
                    <apex:actionFunction name="closeBAMSection" action="{!closePopupBAM}"/>
                    <!-- Added by Rahul(23-08-2016)--End -->
                    <!-- Added by Rahul(23-08-2016)--Start -->
                    <apex:outputPanel id="opBAM">
                        
                <!-- Added by Rahul(23-08-2016)--End -->
                <apex:pageBlockSection id="businessActivityDetails" columns="1" title="Business Activity Mapping Details" collapsible="false">
                 <apex:outputText escape="false" value="{!$Label.BAM_Header_Text}" />
                <apex:commandButton id="selectBAM" value="Select/Edit Business Activity Mapping" action="{!showPopupBAM}" rendered="{!IF((($Profile.Name !='Nokia QIPP Project Viewer') && recIsLocked==false && projState != 'Complete' && projState !='Closed'),true,false)}"/>
                 <apex:commandButton id="ViewBAM" value="View Business Activity Mapping" action="{!showPopupBAM}" rendered="{!IF((recIsLocked==true || projState =='Closed' || projState =='Complete'),true,false)}"/>
                    <apex:pageblockTable value="{!BAMDetailsMap}" var="f" id="pbActivity">
                        <apex:column headerValue="Business Activity" value="{!f.activityName}"/>
                        <apex:column headerValue="Value Stream" value="{!f.valueStream}"/>
                        <apex:column headerValue="Business Function" value="{!f.businessFunc}"/>                
                    </apex:pageBlockTable>            
                            <!--<apex:pageBlockSectionItem >
</apex:pageBlockSectionItem> -->
                            <!-- <apex:commandButton value="Select/Edit Business Activity Mapping" action="{!showPopupBAM}" rendered="{!IF((($Profile.Name !='Nokia QIPP Project Viewer') && recIsLocked==false && projState != 'Complete' && projState !='Closed'),true,false)}"/>-->
                        </apex:pageBlockSection>
                    </apex:outputPanel>
                    <apex:pageBlockSection id="pBlockSection" columns="1" >
                      
                        <apex:outputPanel id="popupBAM"> 
                            <apex:outputPanel id="popupBackgroundBAM" styleClass="BAMpopupBackground" layout="block" rendered="{!displayPopupBAM}" />
                            <apex:outputPanel id="custPopupBAM" styleClass="BAMcustPopup" layout="block" rendered="{!displayPopupBAM}" >
                                <iframe height="550px" id="theIframe" name="theIframe" src="/apex/Business_Activity_Mapping?projectID={!proj.id}" width="950px" style="border:none"> </iframe> 
                                <div align="center" draggable="false" >
                                    
                                    <!--  <apex:commandButton value="Close" action="{!closePopupBAM}"/>-->
                                </div>
                            </apex:outputPanel>  
                        </apex:outputPanel>
                    </apex:pageBlockSection>
                    <!-- BAM Code ends -->
                    
                    <apex:pageblockSection id="benfitSec" title=" Project Benefits" columns="1" collapsible="false" >
                        <apex:outputText escape="false" value="{!$Label.Benefits_Header_Text}" />
                        <apex:pageBlock id="pblockbenfitSec"> 
                            
                            <apex:commandButton id="addBenefit" value="Add New Benefit (Improvement Measure)" action="{!showPopupBenf}" rendered="{!IF((($Profile.Name !='Nokia QIPP Project Viewer') && recIsLocked==false),true,false)}"/>
                            <br></br>
                        <apex:outputText rendered="{!if(((QIPP_Project__c.Total_Project_Validation_Amount__c > 1000) &&  (QIPP_Project__c.Project_State__c == 'In Progress' || QIPP_Project__c.Project_State__c == 'Not Started'||QIPP_Project__c.Project_State__c == 'On Hold')),true,false)}">
                            <font size="2" style="color:red;margin-left:00px;">Note :  QIPP project benefits must be recorded in Kilo Euro (k€) units [ie.1 k€ = 1000€].</font> <br/> 
                            <font size="2" style="color:red;margin-left:40px;">Please correct the numbers if the benefits are not recorded in k€.</font>
                            <br/> <br/> 
                        </apex:outputText>
                        
                        <apex:pageBlockTable value="{!Benefits_RelatedList}" id="pbtabledit" var="benifit_list" rendered="{!AND(NOT(ISNULL(Benefits_RelatedList)),Benefits_RelatedList.size>0)}" columnsWidth="10%,17%,12%,15%,11%,11%,11%,15%" >
                            <apex:column headerValue="Action" style="width:210px">
                                <apex:commandLink id="viewBenefit" value="View" style="color:CornflowerBlue;text-decoration:none;" action="{!showPopupviewBenf}">
                                    <apex:param name="Benefitid" value="{!benifit_list.id}" assignTo="{!benefitid}"/>
                                </apex:commandLink>
                                <apex:outputLabel id="editpipe" value=" | " rendered="{!IF((($Profile.Name !='Nokia QIPP Project Viewer') && recIsLocked==false),true,false)}"/>
                                <apex:commandLink id="editBenefit" value="Edit" style="color:CornflowerBlue;text-decoration:none;" action="{!showPopupeditBenf}" rendered="{!IF((($Profile.Name !='Nokia QIPP Project Viewer') && recIsLocked==false),true,false)}"><!--rendered="{!IF((((projectinfo.CoPQ_Benefits_Validation_State__c != null)&&(projectinfo.CoPQ_Benefits_Validation_State__c == 'With Finance Approver to Validate' || projectinfo.CoPQ_Benefits_Validation_State__c == 'Validation Complete'))|| (projectinfo.Check_DI_Approval_State__c == 'During DI5' ||projectinfo.Check_DI_Approval_State__c == 'DI5 Complete')||(projectinfo.Belt_Project_Phase__c != null && projectinfo.Belt_Project_Phase__c == 'Control / Verify' && projectinfo.FieldForControlVerifyPhase__c == 'RecordLock')||(projectinfo.Belt_Project_Phase__c == 'Complete')),false,true)}"-->
                                    <apex:param name="editBenefitid" value="{!benifit_list.id}" assignTo="{!benefitid}"/>
                                </apex:commandLink> 
                                
                                <apex:outputLabel id="deletepipe" value=" | " rendered="{!IF((($Profile.Name !='Nokia QIPP Project Viewer') && recIsLocked==false),true,false)}"/>
                                <apex:outputLink id="deleteBenefit" style="color:CornflowerBlue;text-decoration:none;" value="/apex/QIPP_Benefit_View?delete={!benifit_list.id}&Projectid={!projectid}" onclick="if (!confirm('Are you sure you want to delete this benefit?')) return false" title="Delete"  rendered="{!IF((($Profile.Name !='Nokia QIPP Project Viewer') && recIsLocked==false),true,false)}" ><!--rendered="{!IF( ((projectinfo.Check_DI_Approval_State__c == 'During DI3' || projectinfo.Check_DI_Approval_State__c == 'DI3 Complete' ||projectinfo.Check_DI_Approval_State__c == 'During DI4' ||projectinfo.Check_DI_Approval_State__c == 'DI4 Complete' ||projectinfo.Check_DI_Approval_State__c == 'During DI5' ||projectinfo.Check_DI_Approval_State__c == 'DI5 Complete') || ((projectinfo.CoPQ_Benefits_Validation_State__c != null)&&(projectinfo.CoPQ_Benefits_Validation_State__c == 'With Finance Approver to Validate' || projectinfo.CoPQ_Benefits_Validation_State__c == 'Validation Complete'))||(projectinfo.Belt_Project_Phase__c != null && projectinfo.Belt_Project_Phase__c == 'Control / Verify' && projectinfo.FieldForControlVerifyPhase__c == 'RecordLock')||(projectinfo.Belt_Project_Phase__c == 'Complete')),false,true)}"-->Delete</apex:outputLink>
                            </apex:column>
                            <apex:column headerValue="Improvement Measure" >
                                <apex:outputPanel rendered="{!IF(len(benifit_list.Improvement_Measure_Name__c)>30,true,false)}">                                  
                                    <apex:outputText title="{!benifit_list.Improvement_Measure_Name__c}" value="{!left(benifit_list.Improvement_Measure_Name__c,30)}..."></apex:outputText>
                                </apex:outputpanel>
                                <apex:outputPanel rendered="{!IF(len(benifit_list.Improvement_Measure_Name__c)<=30,true,false)}">                                  
                                    <apex:outputText title="{!benifit_list.Improvement_Measure_Name__c}" value="{!benifit_list.Improvement_Measure_Name__c}"></apex:outputText>
                                </apex:outputpanel>
                            </apex:column>
                            <apex:column headerValue="Unit of Measure" >                                  
                                <apex:outputField value="{!benifit_list.Unit_of_Measure__c}">
                                    <apex:inlineEditSupport rendered="false"/>
                                </apex:outputField>
                            </apex:column>
                            <apex:column headerValue="Benefit Type"> 
                                <apex:outputField value="{!benifit_list.Benefit_Type__c}"> 
                                    <apex:inlineEditSupport rendered="false"/>
                                </apex:outputField>
                            </apex:column>
                            <apex:column headerValue="Planned (k€)">
                                <apex:outputText value="{!benifit_list.Planned_Financial_Savings_Total__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Financial Savings'),NOT(ISNULL(benifit_list.Planned_Financial_Savings_Total__c)),(benifit_list.Planned_Financial_Savings_Total__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Financial Savings'),NOT(ISNULL(benifit_list.Planned_Financial_Savings_Total__c)),(benifit_list.Planned_Financial_Savings_Total__c)==0)}"/>
                                
                                <apex:outputText value="{!benifit_list.Planned_Operational_Savings_Total__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Operational Savings'),NOT(ISNULL(benifit_list.Planned_Operational_Savings_Total__c)),(benifit_list.Planned_Operational_Savings_Total__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Operational Savings'),NOT(ISNULL(benifit_list.Planned_Operational_Savings_Total__c)),(benifit_list.Planned_Operational_Savings_Total__c)==0)}"/>
                                
                                <apex:outputText value="{!benifit_list.Planned_Projected_Savings_Total__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Projected Revenue'),NOT(ISNULL(benifit_list.Planned_Projected_Savings_Total__c)),(benifit_list.Planned_Projected_Savings_Total__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Projected Revenue'),NOT(ISNULL(benifit_list.Planned_Projected_Savings_Total__c)),(benifit_list.Planned_Projected_Savings_Total__c)==0)}"/>
                                
                                <apex:outputText value="{!benifit_list.Planned_Realized_Savings_Total__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Realized Revenue'),NOT(ISNULL(benifit_list.Planned_Realized_Savings_Total__c)),(benifit_list.Planned_Realized_Savings_Total__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Realized Revenue'),NOT(ISNULL(benifit_list.Planned_Realized_Savings_Total__c)),(benifit_list.Planned_Realized_Savings_Total__c)==0)}"/>
                                
                            </apex:column>
                            <apex:column headerValue="Achieved (k€)">
                                <apex:outputText value="{!benifit_list.Achieved_Financial_Savings_Total__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Financial Savings'),NOT(ISNULL(benifit_list.Achieved_Financial_Savings_Total__c)),(benifit_list.Achieved_Financial_Savings_Total__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Financial Savings'),NOT(ISNULL(benifit_list.Achieved_Financial_Savings_Total__c)),(benifit_list.Achieved_Financial_Savings_Total__c)==0)}"/>
                                
                                <apex:outputText value="{!benifit_list.Achieved_Operational_Savings_Total__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Operational Savings'),NOT(ISNULL(benifit_list.Achieved_Operational_Savings_Total__c)),(benifit_list.Achieved_Operational_Savings_Total__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Operational Savings'),NOT(ISNULL(benifit_list.Achieved_Operational_Savings_Total__c)),(benifit_list.Achieved_Operational_Savings_Total__c)==0)}"/>
                                
                                <apex:outputText value="{!benifit_list.Achieved_Projected_Savings_Total__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Projected Revenue'),NOT(ISNULL(benifit_list.Achieved_Projected_Savings_Total__c)),(benifit_list.Achieved_Projected_Savings_Total__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Projected Revenue'),NOT(ISNULL(benifit_list.Achieved_Projected_Savings_Total__c)),(benifit_list.Achieved_Projected_Savings_Total__c)==0)}"/>
                                
                                <apex:outputText value="{!benifit_list.Achieved_Realized_Savings_Total__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Realized Revenue'),NOT(ISNULL(benifit_list.Achieved_Realized_Savings_Total__c)),(benifit_list.Achieved_Realized_Savings_Total__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Realized Revenue'),NOT(ISNULL(benifit_list.Achieved_Realized_Savings_Total__c)),(benifit_list.Achieved_Realized_Savings_Total__c)==0)}"/>
                            </apex:column>
                            <apex:column headerValue="Future (k€)">
                                <apex:outputText value="{!benifit_list.Future_Financial_Savings_Total__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Financial Savings'),NOT(ISNULL(benifit_list.Future_Financial_Savings_Total__c)),(benifit_list.Future_Financial_Savings_Total__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Financial Savings'),NOT(ISNULL(benifit_list.Future_Financial_Savings_Total__c)),(benifit_list.Future_Financial_Savings_Total__c)==0)}"/>
                                
                                <apex:outputText value="{!benifit_list.Future_Operational_Savings_Total__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Operational Savings'),NOT(ISNULL(benifit_list.Future_Operational_Savings_Total__c)),(benifit_list.Future_Operational_Savings_Total__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Operational Savings'),NOT(ISNULL(benifit_list.Future_Operational_Savings_Total__c)),(benifit_list.Future_Operational_Savings_Total__c)==0)}"/>
                                
                                <apex:outputText value="{!benifit_list.Future_Projected_Savings_Total__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Projected Revenue'),NOT(ISNULL(benifit_list.Future_Projected_Savings_Total__c)),(benifit_list.Future_Projected_Savings_Total__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Projected Revenue'),NOT(ISNULL(benifit_list.Future_Projected_Savings_Total__c)),(benifit_list.Future_Projected_Savings_Total__c)==0)}"/>
                                
                                <apex:outputText value="{!benifit_list.Future_Realized_Savings_Total__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Realized Revenue'),NOT(ISNULL(benifit_list.Future_Realized_Savings_Total__c)),(benifit_list.Future_Realized_Savings_Total__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Realized Revenue'),NOT(ISNULL(benifit_list.Future_Realized_Savings_Total__c)),(benifit_list.Future_Realized_Savings_Total__c)==0)}"/>
                            </apex:column>
                            <apex:column headerValue="Validation Amount (k€)">
                                
                                <apex:outputText value="{!benifit_list.Benefit_Amount_Achieved_Future_k__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Financial Savings'),NOT(ISNULL(benifit_list.Benefit_Amount_Achieved_Future_k__c)),(benifit_list.Benefit_Amount_Achieved_Future_k__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Financial Savings'),NOT(ISNULL(benifit_list.Benefit_Amount_Achieved_Future_k__c)),(benifit_list.Benefit_Amount_Achieved_Future_k__c)==0)}"/>
                                
                                
                                <apex:outputText value="{!benifit_list.Benefit_Operational_Achieved_Future_k__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Operational Savings'),NOT(ISNULL(benifit_list.Benefit_Operational_Achieved_Future_k__c)),(benifit_list.Benefit_Operational_Achieved_Future_k__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Operational Savings'),NOT(ISNULL(benifit_list.Benefit_Operational_Achieved_Future_k__c)),(benifit_list.Benefit_Operational_Achieved_Future_k__c)==0)}"/>
                                
                                <apex:outputText value="{!benifit_list.Benefit_Projected_Achieved_Future_k__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Projected Revenue'),NOT(ISNULL(benifit_list.Benefit_Projected_Achieved_Future_k__c)),(benifit_list.Benefit_Projected_Achieved_Future_k__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Projected Revenue'),NOT(ISNULL(benifit_list.Benefit_Projected_Achieved_Future_k__c)),(benifit_list.Benefit_Projected_Achieved_Future_k__c)==0)}"/>
                                
                                <apex:outputText value="{!benifit_list.Benefit_Realized_Achieved_Future_k__c}" rendered="{!AND((benifit_list.Benefit_Type__c == 'Realized Revenue'),NOT(ISNULL(benifit_list.Benefit_Realized_Achieved_Future_k__c)),(benifit_list.Benefit_Realized_Achieved_Future_k__c)>0)}"/>
                                <apex:outputText value="-" rendered="{!AND((benifit_list.Benefit_Type__c == 'Realized Revenue'),NOT(ISNULL(benifit_list.Benefit_Realized_Achieved_Future_k__c)),(benifit_list.Benefit_Realized_Achieved_Future_k__c)==0)}"/>
                            </apex:column>
                        </apex:pageBlockTable>
                        
                        
                        <apex:pageBlockTable value="{!benefitGrandTotalsList}" headerClass="noHeader" rowClasses="rowColor" var="benifit_grandTotal" rendered="{!AND(NOT(ISNULL(Benefits_RelatedList)),Benefits_RelatedList.size>0)}" columnsWidth="15%,24%,15%,11%,11%,11%,15%">
                            <apex:column headerValue="">
                                <apex:outputText rendered="true"/>
                                
                            </apex:column>
                            
                            <apex:column headerValue=" ">
                                <apex:outputText rendered="true"/>
                                
                            </apex:column>
                            <apex:column headerValue="Grand Totals ">
                                <apex:outputText value="Total Project Benefits" rendered="true" style="float:left"/>
                                
                            </apex:column>
                            <apex:column headerValue="Planned (k€)">
                                <apex:outputText value="{!benifit_grandTotal.plannedGTotalEuro}" rendered="true" style="float:left"/>
                                
                            </apex:column>
                            <apex:column headerValue="Achieved (k€)">
                                <apex:outputText value="{!benifit_grandTotal.achievedGTotalEuro}" rendered="true" style="float:left"/>
                                
                            </apex:column>
                            <apex:column headerValue="Future (k€)">
                                <apex:outputText value="{!benifit_grandTotal.futureGTotalEuro}" rendered="true" style="float:left"/>
                                
                            </apex:column>
                            <apex:column headerValue="Validation Amount (k€)">
                                <apex:outputText value="{!benifit_grandTotal.validationAmountEuro}" rendered="true" style="float:left"/>
                            </apex:column>    
                            
                        </apex:pageBlockTable>
                        
                        <apex:pageBlockSection rendered="{!OR(ISNULL(Benefits_RelatedList),Benefits_RelatedList.size=0)}"  columns="1">
                            <b> <i>There are NO Benefits to display.</i></b>
                        </apex:pageBlockSection>
                        <apex:commandButton id="BenefitsOverview" value="Benefits Overview" onclick="projectCreation()" rendered="{!IF((($Profile.Name !='Nokia QIPP Project Viewer') && recIsLocked==false && Benefits_RelatedList!=null && Benefits_RelatedList.size>0),true,false)}"/><br/>
                        <span style="padding-top: 5px;">
                            <apex:outputText rendered="{!IF(Benefits_RelatedList.size>0,true,false)}" >{!$Label.QIPP_Benefit_Section_Message}</apex:outputText>
                        </span>
                    </apex:pageBlock>
                    
                </apex:pageblockSection>
                
                <!-- Start of View -->
                
                <apex:outputPanel id="popupviewBenf"> 
                    <apex:outputPanel id="popupcustviewBenf" styleClass="BenfpopupBackground" layout="block" rendered="{!displayPopupviewBenf}" />
                    <apex:outputPanel id="custPopupviewBenf" styleClass="BenfcustPopup" layout="block" rendered="{!displayPopupviewBenf}" >
                        <apex:pageBlockSection columns="2" title="Improvement Measure" collapsible="false">
                        </apex:pageBlockSection>
                        <apex:pageBlockSection id="pbsmeasureView" columns="2">
                            <apex:pageBlockSectionItem helpText="{!$ObjectType.QIPP_Benefit__c.fields.Improvement_Measure_Name__c.inlineHelpText}">
                                <apex:outputLabel value="Improvement Measure"/>
                                <apex:outputtext value="{!benifit2.Improvement_Measure_Name__c}" />
                            </apex:pageBlockSectionItem>
                            
                            <apex:pageBlockSectionItem id="benefitTypeItemView" helpText="{!$ObjectType.QIPP_Benefit__c.fields.Benefit_Type__c.inlineHelpText}">
                                <apex:outputLabel value="Benefit Type" style="display:inline-block;width:70px"/>
                                <apex:outputtext value="{!benifit2.Benefit_Type__c}" />
                            </apex:pageBlockSectionItem>
                            
                            <apex:pageBlockSectionItem helpText="{!$ObjectType.QIPP_Benefit__c.fields.Unit_of_Measure__c.inlineHelpText}" >
                                <apex:outputLabel value="Unit of Measure" />
                                <apex:outputText value="{!benifit2.Unit_of_Measure__c}" />
                            </apex:pageBlockSectionItem>
                            
                            
                            <apex:pageBlockSectionItem dataStyle="word-break:break-all" helpText="{!$ObjectType.QIPP_Benefit__c.fields.ImprovementMeasure_Brief_Description__c.inlineHelpText}">
                                <apex:outputLabel value="Brief Description" />
                                <apex:outputfield value="{!benifit2.ImprovementMeasure_Brief_Description__c}" >
                                    <apex:inlineEditSupport rendered="false"/>
                                </apex:outputField>
                            </apex:pageBlockSectionItem>
                            
                            <!--    </apex:outputPanel></apex:outputPanel>-->
                        </apex:pageBlockSection>
                        
                        
                        <apex:pageBlockSection columns="1" id="benefitLineItemView" collapsible="false">
                            <apex:variable var="rowNum" value="{!0}" /> 
                            <apex:pageBlockTable value="{!Bn_rep_AddList1}" var="benefitTable" columnsWidth="20%,20%,20%,20%,20%">
                                <apex:column headerValue="Year" style="width:80px">
                                    <apex:outputField value="{!benefitTable.Years__c}">
                                        <apex:inlineEditSupport rendered="false"/>
                                    </apex:outputField>
                                </apex:column>
                                
                                <apex:column headerValue="Month" style="width:80px">
                                    <apex:outputField value="{!benefitTable.Months__c}" rendered="true">
                                        <apex:inlineEditSupport rendered="false"/>
                                    </apex:outputField>
                                </apex:column>
                                
                                <apex:column headerValue="Planned (k€)" style="width:80px">
                                    <apex:outputText value="{!benefitTable.Benefits_Saving_Amount_Planned__c}" rendered="{!AND(NOT(ISNULL(benefitTable.Benefits_Saving_Amount_Planned__c)),(benefitTable.Benefits_Saving_Amount_Planned__c)!=0)}"/>
                                    <apex:outputText value="-" rendered="{!OR(ISNULL(benefitTable.Benefits_Saving_Amount_Planned__c),(benefitTable.Benefits_Saving_Amount_Planned__c)==0)}"/>
                                </apex:column>
                                
                                <apex:column headerValue="Achieved (k€)" style="width:80px">
                                    <apex:outputText value="{!benefitTable.Benefits_Saving_Amount_Achieved__c}" rendered="{!AND(NOT(ISNULL(benefitTable.Benefits_Saving_Amount_Achieved__c)),(benefitTable.Benefits_Saving_Amount_Achieved__c)!=0)}"/>
                                    <apex:outputText value="-" rendered="{!OR(ISNULL(benefitTable.Benefits_Saving_Amount_Achieved__c),(benefitTable.Benefits_Saving_Amount_Achieved__c)==0)}"/>
                                </apex:column>
                                
                                <apex:column headerValue="Future (k€)" style="width:80px">
                                    <apex:outputText value="{!benefitTable.Benefit_Savings_Amount__c}" rendered="{!AND(NOT(ISNULL(benefitTable.Benefit_Savings_Amount__c)),(benefitTable.Benefit_Savings_Amount__c)!=0)}"/>
                                    <apex:outputText value="-" rendered="{!OR(ISNULL(benefitTable.Benefit_Savings_Amount__c),(benefitTable.Benefit_Savings_Amount__c)==0)}"/>
                                </apex:column>
                                
                            </apex:pageBlockTable> 
                            <apex:pageBlockTable value="{!benefitTotalsList}" headerClass="noHeader" rowClasses="rowColor" var="benifit_Total" rendered="{!AND(NOT(ISNULL(Bn_rep_AddList1)),Bn_rep_AddList1.size>0)}" columnsWidth="20%,20%,20%,20%,20%">
                                <apex:column headerValue=" ">
                                    <apex:outputText rendered="true"/>
                                </apex:column>
                                <apex:column headerValue="Grand Totals ">
                                    <apex:outputText value="Totals" rendered="true" style="float:left"/>
                                </apex:column>
                                <apex:column headerValue="Planned (k€)">
                                    <apex:outputText value="{!benifit2.Total_Benefit_Planned_Amount__c} (k€)" rendered="{!IF(benifit2.Total_Benefit_Planned_Amount__c!=0,true,false)}" style="float:left"/>
                                    <apex:outputText value="-" rendered="{!OR(ISNULL(benifit2.Total_Benefit_Planned_Amount__c),(benifit2.Total_Benefit_Planned_Amount__c)==0)}"/>
                                </apex:column>
                                <apex:column headerValue="Achieved (k€)">
                                    <apex:outputText value="{!benifit2.Total_Benefit_Achieved_Amount__c} (k€)" rendered="{!IF(benifit2.Total_Benefit_Achieved_Amount__c!=0,true,false)}" style="float:left"/>
                                    <apex:outputText value="-" rendered="{!OR(ISNULL(benifit2.Total_Benefit_Achieved_Amount__c),(benifit2.Total_Benefit_Achieved_Amount__c)==0)}"/>
                                </apex:column>
                                <apex:column headerValue="Future (k€)">
                                    <apex:outputText value="{!benifit2.Total_Benefit_Future_Amount__c} (k€)" rendered="{!IF(benifit2.Total_Benefit_Future_Amount__c!=0,true,false)}" style="float:left"/>
                                    <apex:outputText value="-" rendered="{!OR(ISNULL(benifit2.Total_Benefit_Future_Amount__c),(benifit2.Total_Benefit_Future_Amount__c)==0)}"/>
                                </apex:column>
                            </apex:pageBlockTable> 
                            
                        </apex:pageBlockSection>
                        <div align="center" draggable="false" >
                            <apex:commandButton id="closeviewpopup" value="Edit" action="{!closePopupviewBenf}" rendered="{!IF((($Profile.Name !='Nokia QIPP Project Viewer') && recIsLocked==false),true,false)}"/>
                            <apex:commandButton value="Close" action="{!closePopupviewonlyBenf}"/>
                        </div>
                        <!-- </apex:pageBlockTable>-->
                    </apex:outputPanel>  
                </apex:outputPanel>
                <!-- End of View -->           
                
                <apex:outputPanel id="popupBenf"> 
                    <apex:outputPanel id="popupBackgroundBenf" styleClass="BenfpopupBackground" layout="block" rendered="{!displayPopupBenf}" />
                    <apex:outputPanel id="custPopupBenf" styleClass="BenfcustPopup" layout="block" rendered="{!displayPopupbenf}" >
                        <apex:actionstatus id="actStatusId">
                            <apex:facet name="start">
                                <div class="waitingSearchDiv" id="el_loading" style="background-color: #DCD6D6;height: 100%;opacity:0.65;width:100%;"> 
                                    <div class="waitingHolder" style="top: 74.2px; width: 91px;">
                                        <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />
                                        <span class="waitingDescription"></span>
                                    </div>
                                </div>
                            </apex:facet>
                        </apex:actionstatus>
                        <apex:pagemessages id="benifitsErrorblock" rendered="{!benifitsErrorMessages}"/>     
                        <apex:pageBlockSection columns="3" title="Improvement Measure" collapsible="false">
                        </apex:pageBlockSection>
                        <apex:pageBlockSection id="pbsmeasure" columns="3">
                            <apex:pageBlockSectionItem id="projectMeasureItem" helpText="{!$ObjectType.QIPP_Benefit__c.fields.Improvement_Measure_Name__c.inlineHelpText}" dataStyle="width:10%;float:center">
                                <apex:outputLabel value="Improvement Measure"  style="display:inline-block;width:140px"/> 
                                <apex:actionRegion >
                                    <apex:outputPanel styleClass="requiredInput" layout="block">
                                        <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                                        <apex:inputText html-placeholder="Enter 1 or more charecter to search" list="{!listOfStrings}"  value="{!textdata}" style="width:350px;height:22px;margin-top:5px" onkeypress=" return preventEnterKey(event)">
                                            <apex:actionSupport event="onchange"  action="{!getBusinesslinelist}" reRender="pbsmeasure" status="actStatusId"/>
                                        </apex:inputText> 
                                    </apex:outputPanel>    
                                </apex:actionRegion>
                            </apex:pageBlockSectionItem>
                            
                            <apex:pageBlockSection id="unitmeas">
                                <apex:pageBlockSectionItem helpText="{!$ObjectType.QIPP_Benefit__c.fields.Unit_of_Measure__c.inlineHelpText}" >
                                    <apex:outputLabel value="Unit of Measure"  style="display:inline-block;width:90px"/>
                                    <apex:outputPanel styleClass="requiredInput" layout="block">
                                        <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                                        <apex:inputText list="{!listOfUoM}" value="{!UoMeasure}" style="width:120px;height:22px;margin-top:2px" onkeypress=" return preventEnterKey(event)"/>
                                    </apex:outputPanel>    
                                </apex:pageBlockSectionItem>
                            </apex:pageBlockSection>
                            <apex:pageBlockSectionItem >
                                <apex:outputText ></apex:outputText>
                            </apex:pageBlockSectionItem>
                            
                            
                            <apex:pageBlockSectionItem id="descItem" dataStyle="width:10%;float:center" helpText="{!$ObjectType.QIPP_Benefit__c.fields.ImprovementMeasure_Brief_Description__c.inlineHelpText}"><!--helpText="Brief Description">-->
                                <apex:outputLabel value="Brief Description" for="desc" style="display:inline-block;width:120px;"/>
                                <apex:inputField id="desc" html-placeholder="Enter Description for Improvement Measure - 500 character limit" value="{!benifit.ImprovementMeasure_Brief_Description__c}" style="width: 350px; height: 60px" />
                            </apex:pageBlockSectionItem> 
                            <apex:pageBlockSectionItem >
                                <apex:outputText ></apex:outputText>
                            </apex:pageBlockSectionItem>
                            
                            <apex:pageBlockSectionItem >
                                <apex:outputText ></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem id="benefitTypeItem" dataStyle="width:10%;float:center" helpText="{!$ObjectType.QIPP_Benefit__c.fields.Benefit_Type__c.inlineHelpText}" >
                                <apex:outputLabel value="Benefit Type" style="display:inline-block"/>
                                <apex:outputPanel styleClass="requiredInput" layout="block">
                                    <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                                    <apex:selectRadio value="{!impBenefitType}" style="width:200%;margin-left:-18px;margin-top:-10px" onkeypress=" return preventEnterKey(event)">
                                        <apex:selectOption itemValue="Financial Savings" itemlabel="Financial Savings" /> 
                                        <apex:selectOption itemValue="Operational Savings" itemlabel="Operational Savings" />
                                        <apex:selectOption itemValue="Projected Revenue" itemlabel="Projected Revenue" />
                                        <apex:selectOption itemValue="Realized Revenue" itemlabel="Realized Revenue" />
                                    </apex:selectRadio>
                                </apex:outputPanel>    
                            </apex:pageBlockSectionItem>    
                            
                            <apex:pageBlockSectionItem >
                                <apex:outputText ></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputText ></apex:outputText>
                            </apex:pageBlockSectionItem>
                        </apex:pageBlockSection>
                        <apex:pageBlockSection columns="5">
                            <apex:pageBlockSectionItem >
                                <apex:outputText ></apex:outputText>
                            </apex:pageBlockSectionItem>
                            
                            <apex:pageBlockSectionItem >
                                
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputText ></apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputText ></apex:outputText>
                            </apex:pageBlockSectionItem>
                        </apex:pageBlockSection>
                        
                        <apex:pageBlockSection columns="1" id="benefitLineItem" collapsible="false">
                            <apex:variable var="rowNum" value="{!0}" />
                            <apex:pageBlockTable id="addbenefittable" value="{!Bn_rep_AddList}" var="benefitTable">
                                
                                <apex:facet name="footer">
                                    <apex:outputPanel >
                                        <div>
                                            <apex:commandButton value="Add Row" action="{!addRow}" reRender="benefitLineItem" rendered="true" status="actStatusId"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <div style="margin-left:120px;margin-right:-120px;margin-top:-20px">
                                                <apex:outputLabel value="Total" style="width: 150px;font-size:12px; font-weight:bold; text-align:right;"></apex:outputLabel>
                                                <apex:inputText id="pltotal" html-readonly="true" style="width: 122px; margin-left:28px;background-color: lightgray;" onkeypress=" return preventEnterKey(event)"/>
                                                <apex:inputText id="achtotal" html-readonly="true" style="width: 122px;margin-left:6px;background-color: lightgray;" onkeypress=" return preventEnterKey(event)"/>
                                                <apex:inputText id="futtotal" html-readonly="true" style="width: 122px;margin-left:6px;background-color: lightgray;" onkeypress=" return preventEnterKey(event)"/>
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                </apex:facet>
                                
                                <apex:column headerValue="No." style="width:10px; text-align:center;">
                                    <apex:outputText value="{0,number, ###}" style="text-align:center;">   
                                        <apex:param value="{!rowNum+1}" />   
                                    </apex:outputText>
                                </apex:column>
                                
                                <apex:column headerValue="Year" style="width:10px;">
                                    <!--<apex:inputField value="{!benefitTable.Years__c}" rendered="true" style="width: 80px;"/>-->
                                    <apex:selectList id="year" value="{!benefitTable.Years__c}" size="1" style="width: 80px;">
                                        <apex:selectOptions value="{!YearValues}"/>
                                    </apex:selectList>
                                </apex:column>
                                <apex:column headerValue="Month" style="width:10px;">
                                    <apex:inputField value="{!benefitTable.Months__c}" rendered="true" style="width: 60px;"/>
                                </apex:column>
                                <apex:column headerValue="Planned" style="width:12px;">
                                    <div class="input-icon">
                                        <i>k€</i>
                                        <apex:inputText html-placeholder="Enter Value in k€" style="width: 100px;padding-top:5px;" value="{!benefitTable.Benefits_Saving_Amount_Planned__c}" rendered="true" onkeypress="return isNumberKey(event)" onchange="sumplanned()" styleClass="totalplamount"/>
                                    </div>
                                </apex:column>
                                
                                <apex:column headerValue="Achieved" style="width:12px;">
                                    <div class="input-icon">
                                        <i>k€</i>
                                        <apex:inputText html-placeholder="Enter Value in k€" style="width: 100px;padding-top:5px;" value="{!benefitTable.Benefits_Saving_Amount_Achieved__c}" rendered="true" onkeypress="return isNumberKey(event)" onchange="sumachieved()" styleClass="totalachamount"/>
                                    </div>
                                </apex:column>
                                <apex:column headerValue="Future" style="width:12px;" >
                                    <div class="input-icon">
                                        <i>k€</i>
                                        <apex:inputText html-placeholder="Enter Value in k€" style="width: 100px;padding-top:5px;" value="{!benefitTable.Benefit_Savings_Amount__c  }" rendered="true" onkeypress="return isNumberKey(event)" onchange="sumfuture()" styleClass="totalfutamount"/>
                                    </div>
                                </apex:column>
                                <apex:column style="width:200px">  
                                    <apex:commandLink style="width: 80px;padding-top:5px;font-size:12px; font-weight:bold; text-align:right;text-decoration:none;" styleClass="btn" value="Clone" action="{!cloneRow}" reRender="benefitLineItem,benifitSaveButton" rendered="true" oncomplete="clonesum()" status="actStatusId">
                                        <apex:param value="{!rowNum}" name="index" assignTo="{!index}" />
                                    </apex:commandLink>
                                </apex:column>
                                <apex:column >
                                    <apex:commandLink style="width: 80px;padding-top:5px;font-size:15px; font-weight:bold; text-align:right;color:red;" value="X" action="{!delRow}" reRender="benefitLineItem,benifitSaveButton" rendered="true" onclick="if (! confirm('Do you want to delete the row from benefits?')) return false" oncomplete="clonesum()" status="actStatusId">
                                        <apex:param value="{!rowNum}" name="index" assignTo="{!index}"/>
                                    </apex:commandLink>
                                    <apex:variable var="rowNum" value="{!rowNum+1}"/>
                                </apex:column>  
                                
                            </apex:pageBlockTable> 
                        </apex:pageBlockSection>
                        <div align="center" draggable="false" >
                            <!--<apex:commandButton id="benifitSaveButton" value="Save & Close"  action="{!saveBenefit}" onclick="return validationamount()"/>-->
                            <apex:commandButton id="benifitSaveButton" value="Save & Close" onclick=" validationamount();" oncomplete="SaveBenefits();" />
                            <apex:actionFunction name="doSubmit" action="{!saveBenefit}" />
                            <apex:commandButton value="Cancel" action="{!closePopupBenf}"/>
                        </div> 
                        <div id="importantNotes" align="left" draggable="false" style="margin-left:10px;margin-right:1;margin-top:10px;">
                            <span><b>Note:</b></span><br/>
                            <apex:outputLabel > 1) The sum of achieved and future savings/revenue are counted as project benefits or continuous improvement impact (CII).</apex:outputLabel><br/>
                            <apex:outputLabel >Planned savings/revenue are not considered as part of project benefits or CII.</apex:outputLabel><br/>
                            <apex:outputLabel > 2) Always record the net benefits - after deducting project cost and/or other depreciation.</apex:outputLabel><br/>
                            <apex:outputLabel > 3) CI projects benefits are usually extrapolated for up to 12 months after the process changes have been implemented. This period may be greater than 12 months when</apex:outputLabel><br/>
                            <apex:outputLabel > the project requires significant investment that cannot be recouped with net impact within 12 months.</apex:outputLabel><br/>
                        </div>
                    </apex:outputPanel>  
                </apex:outputPanel> 
                
                <!-- Start of Edit view -->
                
                <apex:outputPanel id="popupEditBenf"> 
                    <apex:outputPanel id="popupEditBackgroundBenf" styleClass="BenfpopupBackground" layout="block" rendered="{!displayPopupeditBenf}" />
                    <apex:outputPanel id="custEditPopupBenf" styleClass="BenfcustPopup" layout="block" rendered="{!displayPopupeditBenf}" >
                        <apex:actionstatus id="actStatusId1">
                            <apex:facet name="start">
                                <div class="waitingSearchDiv" id="el_loading" style="background-color: #DCD6D6;height: 100%;opacity:0.65;width:100%;"> 
                                    <div class="waitingHolder" style="top: 74.2px; width: 91px;">
                                        <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />
                                        <span class="waitingDescription"></span>
                                    </div>
                                </div>
                            </apex:facet>
                        </apex:actionstatus>
                        <apex:pagemessages id="editBenifitsErrorblock" rendered="{!editBenifitsErrorMessages}"/>
                        <apex:pageBlock id="pbeditbenf">
                            <apex:pageBlockSection id="pbsmeasureEdit" columns="3"  title="Improvement Measure Edit" collapsible="false">
                                
                                <apex:pageBlockSectionItem id="projectMeasureItem" dataStyle="width:10%;float:center" helpText="{!$ObjectType.QIPP_Benefit__c.fields.Improvement_Measure_Name__c.inlineHelpText}">
                                    <apex:outputLabel value="Improvement Measure" style="display:inline-block;width:140px"/>
                                    <apex:actionRegion >
                                        <apex:outputPanel styleClass="requiredInput" layout="block">
                                            <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                                            <apex:inputText list="{!listOfStrings}" value="{!benifit.Improvement_Measure_Name__c}" style="width:350px;height:18px;margin-top:2px"  onkeypress=" return preventEnterKey(event)">
                                                <apex:actionSupport event="onchange" action="{!getBusinesslinelist1}" reRender="unitmeasEdit,briefdescEdit,benfittypeid" status="actStatusId1"/>
                                            </apex:inputText> 
                                        </apex:outputPanel>    
                                    </apex:actionRegion>
                                </apex:pageBlockSectionItem>
                                
                                <apex:pageBlockSection id="unitmeasEdit">
                                    <apex:pageBlockSectionItem helpText="{!$ObjectType.QIPP_Benefit__c.fields.Unit_of_Measure__c.inlineHelpText}">
                                        <apex:outputLabel value="Unit Of measure" style="display:inline-block;width:90px;margin-left:-90px"/>
                                        <apex:outputPanel styleClass="requiredInput" layout="block">
                                            <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                                            <apex:inputText list="{!listOfUoM}" value="{!benifit.Unit_of_Measure__c}" style="width:120px;height:18px;margin-top:-2px;" onkeypress=" return preventEnterKey(event)"/>
                                        </apex:outputPanel>    
                                    </apex:pageBlockSectionItem>
                                </apex:pageBlockSection>
                                <apex:pageBlockSectionItem >
                                    <apex:outputText ></apex:outputText>
                                </apex:pageBlockSectionItem>
                                
                                <apex:pageBlockSection id="briefdescEdit">
                                    <apex:pageBlockSectionItem helpText="{!$ObjectType.QIPP_Benefit__c.fields.ImprovementMeasure_Brief_Description__c.inlineHelpText}" dataStyle="width:10%;float:center">
                                        <apex:outputLabel value="Brief Description" style="display:inline-block;width:140px;" />
                                        <apex:inputField html-placeholder="Enter Description for Improvement Measure - 500 character limit" value="{!benifit.ImprovementMeasure_Brief_Description__c}" style="width:350px;height:45px"/>
                                    </apex:pageBlockSectionItem>
                                </apex:pageBlockSection>
                                <apex:pageBlockSectionItem >
                                    <apex:outputText ></apex:outputText>
                                </apex:pageBlockSectionItem>
                                
                                <apex:pageBlockSectionItem >
                                    <apex:outputText ></apex:outputText>
                                </apex:pageBlockSectionItem>
                                
                                <apex:pageBlockSectionItem id="benefitTypeItem" dataStyle="width:50%;float:center" labelStyle="width:1%;float:center;margin-top:-10px;" helpText="{!$ObjectType.QIPP_Benefit__c.fields.Benefit_Type__c.inlineHelpText}">
                                    <apex:outputLabel value="Benefit Type" style="display:inline-block;width:125px;margin-top:-10px"/>
                                    <apex:outputPanel id="benfittypeid" styleClass="requiredInput" layout="block">
                                        <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                                        <apex:selectRadio value="{!benifit.Benefit_Type__c}" style="width:140%;float:left;margin-left:-18px;margin-top: -10px;" onkeypress=" return preventEnterKey(event)">
                                            <apex:selectOption itemValue="Financial Savings" itemlabel="Financial Savings" />
                                            <apex:selectOption itemValue="Operational Savings" itemlabel="Operational Savings" />
                                            <apex:selectOption itemValue="Projected Revenue" itemlabel="Projected Revenue" />
                                            <apex:selectOption itemValue="Realized Revenue" itemlabel="Realized Revenue" />
                                        </apex:selectRadio>
                                    </apex:outputPanel>    
                                </apex:pageBlockSectionItem>
                                
                            </apex:pageBlockSection>
                            
                            <apex:pageBlockSection columns="1" id="benefitLineItemEdit" collapsible="false">
                                <apex:variable var="rowNum" value="{!0}" /> 
                                <apex:pageBlockTable id="pbtableeditbenf" value="{!Bn_rep_AddList}" var="benefitTable">
                                    
                                    <apex:facet name="footer">
                                        <apex:outputPanel >
                                            <div>
                                                <apex:commandButton value="Add Row" action="{!addRow}" reRender="benefitLineItemEdit" rendered="true" status="actStatusId"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div style="margin-left:120px;margin-right:-120px;margin-top:-20px">
                                                    <apex:outputLabel value="Total" style="width: 150px;font-size:12px; font-weight:bold; text-align:right;"></apex:outputLabel>
                                                    <apex:inputText id="pltotal" html-readonly="true" style="width: 122px; margin-left:28px;background-color: lightgray;" onkeypress=" return preventEnterKey(event)"/>
                                                    <apex:inputText id="achtotal" html-readonly="true" style="width: 122px;margin-left:6px;background-color: lightgray;" onkeypress=" return preventEnterKey(event)"/>
                                                    <apex:inputText id="futtotal" html-readonly="true" style="width: 122px;margin-left:6px;background-color: lightgray;" onkeypress=" return preventEnterKey(event)"/>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </apex:facet>
                                    
                                    <apex:column headerValue="No." style="width:10px; text-align:center;">
                                        <apex:outputText value="{0,number, ###}" style="text-align:center;">   
                                            <apex:param value="{!rowNum+1}" />   
                                        </apex:outputText>
                                    </apex:column>
                                    
                                    <apex:column headerValue="Year" style="width:10px">
                                        <!--<apex:inputField value="{!benefitTable.Years__c}" rendered="true" style="width: 80px;"/>-->
                                        <apex:selectList id="year" value="{!benefitTable.Years__c}" size="1" style="width: 80px;">
                                            <apex:selectOptions value="{!YearValues}"/>
                                        </apex:selectList>
                                    </apex:column>
                                    
                                    <apex:column headerValue="Month" style="width:10px">
                                        <apex:inputField value="{!benefitTable.Months__c}" rendered="true" style="width: 60px;"/>
                                    </apex:column>
                                    
                                    <apex:column headerValue="Planned" style="width:12px;">
                                        <div class="input-icon">
                                            <i>k€</i>
                                            <apex:inputText html-placeholder="Enter Value in k€" value="{!benefitTable.Benefits_Saving_Amount_Planned__c}" rendered="true" style="width: 100px;padding-top:5px;" onkeypress="return isNumberKey(event)" onchange="editsumplanned()" styleClass="edittotalplamount"/>
                                        </div>
                                    </apex:column>
                                    
                                    <apex:column headerValue="Achieved" style="width:12px">
                                        <div class="input-icon">
                                            <i>k€</i>
                                            <apex:inputText html-placeholder="Enter Value in k€" value="{!benefitTable.Benefits_Saving_Amount_Achieved__c}" rendered="true" style="width: 100px;padding-top:5px;" onkeypress="return isNumberKey(event)"  onchange="editsumachieved()" styleClass="edittotalachamount"/>
                                        </div>
                                    </apex:column>
                                    
                                    <apex:column headerValue="Future" style="width:12px">
                                        <div class="input-icon">
                                            <i>k€</i>
                                            <apex:inputText html-placeholder="Enter Value in k€" value="{!benefitTable.Benefit_Savings_Amount__c  }" rendered="true" style="width: 100px;padding-top:5px;"  onkeypress="return isNumberKey(event)" onchange="editsumfuture()" styleClass="edittotalfutamount"/>
                                        </div>
                                    </apex:column>
                                    <apex:column style="width:200px">  
                                        <apex:commandLink style="width: 80px;padding-top:5px;font-size:12px; font-weight:bold; text-align:right;text-decoration:none;" styleClass="btn" value="Clone" action="{!cloneRow}" onkeypress="return isNumberKey(event)" reRender="benefitLineItemEdit" rendered="true" oncomplete="editclonesum()" status="actStatusId1">
                                            <apex:param value="{!rowNum}" name="index" />
                                        </apex:commandLink>
                                    </apex:column>
                                    <apex:column >
                                        <apex:commandLink style="width: 80px;padding-top:5px;font-size:15px; font-weight:bold; text-align:right;color:red;"  value="X" action="{!delRow}" onclick="if (! confirm('Do you want to delete the row from benefits?')) return false" reRender="benefitLineItemEdit" rendered="true" oncomplete="editclonesum()" status="actStatusId1">
                                            <apex:param value="{!rowNum}" name="index" />
                                        </apex:commandLink>
                                        <apex:variable var="rowNum" value="{!rowNum+1}"/>
                                    </apex:column> 
                                    
                                </apex:pageBlockTable> 
                            </apex:pageBlockSection>
                            <apex:pageBlockButtons id="pbeditbuttons" location="bottom">
                                <!--<apex:commandButton id="benifitEditSaveButton" value="Save & Close" action="{!saveBenefit}" style="margin-left:100px" onclick=" return editvalidationamount()"/>-->
                                <apex:commandButton id="benifitEditSaveButton" value="Save & Close" style="margin-left:100px" onclick=" editvalidationamount();"  oncomplete="editSaveBenefits();"/>
                                <apex:actionFunction name="doeditSubmit" action="{!saveBenefit}" />
                                
                                <apex:commandButton value="Cancel" action="{!closeEditPopupBenf}"/>
                            </apex:pageBlockButtons>
                        </apex:pageBlock>
                        <div id="importantNotes_edit" align="left" draggable="false" style="margin-left:10px;margin-right:1;margin-top:10px;">
                            <span><b>Note:</b></span><br/>
                            <apex:outputLabel > 1) The sum of achieved and future savings/revenue are counted as project benefits or continuous improvement impact (CII).</apex:outputLabel><br/>
                            <apex:outputLabel >Planned savings/revenue are not considered as part of project benefits or CII.</apex:outputLabel><br/>
                            <apex:outputLabel > 2) Always record the net benefits - after deducting project cost and/or other depreciation.</apex:outputLabel><br/>
                            <apex:outputLabel > 3) CI projects benefits are usually extrapolated for up to 12 months after the process changes have been implemented. This period may be greater than 12 months when</apex:outputLabel><br/>
                            <apex:outputLabel > the project requires significant investment that cannot be recouped with net impact within 12 months.</apex:outputLabel><br/>
                        </div>
                    </apex:outputPanel>  
                </apex:outputPanel>                     
                <!-- End of Edit view -->
                
                
                <!-- BBG % Distribution ** Start ** -->
                <apex:pageBlockSection id="benefitingBusinessGrp" title="Benefit Distribution" collapsible="false" rendered="{!IF(((Benefits_RelatedList!=null && Benefits_RelatedList.size>0) && (benefitAmount > 0)),true,false)}"/>
                <apex:pageBlockSection columns="1" id="bgGroupSection" collapsible="false" rendered="{!IF(((Benefits_RelatedList!=null && Benefits_RelatedList.size>0) && (benefitAmount > 0)),true,false)}">
                    <apex:variable var="bggRowNum" value="{!0}" />
                    <!--BBG % Distribution Table on Project view -->
                    <apex:outputText rendered="{!IF((projectbbglist!=null && projectbbglist.size>0),true,false)}">{!$Label.QIPP_Benefit_Distribution_Message}</apex:outputText>
                    <apex:pageBlockTable value="{!projectbbglist}" var="bgTable" id="pbTableBG2">
                        <apex:column headerValue="No." style="width:20px; text-align:center;" headerClass="centertext">
                            <apex:outputText value="{0,number, ###}" style="text-align:center;">   
                                <apex:param value="{!bggRowNum+1}" />   
                            </apex:outputText>
                        </apex:column>
                        <apex:column headerValue="Business Group" style="width:120px">
                            <apex:outputField value="{!bgTable.Benefitting_Business_Grp_Functional_Grp__c}" rendered="true">
                                <apex:inlineEditSupport rendered="false"/>
                            </apex:outputField>
                        </apex:column>
                        <apex:column headerValue="Business Unit" style="width:120px">
                            <apex:outputField value="{!bgTable.Benefitting_Business_Unit__c}" rendered="true">
                                <apex:inlineEditSupport rendered="false"/>
                            </apex:outputField>
                        </apex:column>
                        <apex:column headerValue="Business Line" style="width:120px">
                            <apex:outputField value="{!bgTable.Benefitting_Business_Line__c}" rendered="true">
                                <apex:inlineEditSupport rendered="false"/>
                            </apex:outputField>
                        </apex:column>
                        <apex:column headerValue="Financial Validation Amount(k€)" style="width:120px">
                            <apex:outputText value="{!bgTable.Financial_Validation_Amount__c}(k€)" rendered="{!AND(NOT(ISNULL(bgTable.Financial_Validation_Amount__c)),(bgTable.Financial_Validation_Amount__c)>0)}"/>
                            <apex:outputText value="-" rendered="{!OR(ISNULL(bgTable.Financial_Validation_Amount__c),(bgTable.Financial_Validation_Amount__c)==0.0)}"/>   
                        </apex:column>
                        <apex:column headerValue="Operational Validation Amount(k€)" style="width:120px">
                            <apex:outputText value="{!bgTable.Operational_Validation_Amount__c}(k€)" rendered="{!AND(NOT(ISNULL(bgTable.Operational_Validation_Amount__c)),(bgTable.Operational_Validation_Amount__c)>0)}"/>
                            <apex:outputText value="-" rendered="{!OR(ISNULL(bgTable.Operational_Validation_Amount__c),(bgTable.Operational_Validation_Amount__c)==0.0)}"/>
                        </apex:column>
                        <apex:column headerValue="Projected Validation Amount(k€)" style="width:120px">
                            <apex:outputText value="{!bgTable.Projected_Validation_Amount__c}(k€)" rendered="{!AND(NOT(ISNULL(bgTable.Projected_Validation_Amount__c)),(bgTable.Projected_Validation_Amount__c)>0)}"/>
                            <apex:outputText value="-" rendered="{!OR(ISNULL(bgTable.Projected_Validation_Amount__c),(bgTable.Projected_Validation_Amount__c)==0.0)}"/>       
                        </apex:column>
                        <apex:column headerValue="Realized Validation Amount (k€)" style="width:120px">
                            <apex:outputText value="{!bgTable.Realized_Validation_Amount__c}(k€)" rendered="{!AND(NOT(ISNULL(bgTable.Realized_Validation_Amount__c)),(bgTable.Realized_Validation_Amount__c)>0)}"/>
                            <apex:outputText value="-" rendered="{!OR(ISNULL(bgTable.Realized_Validation_Amount__c),(bgTable.Realized_Validation_Amount__c)==0.0)}"/>         
                        </apex:column>
                        <apex:column headerValue=" Total (k€)" style="width:120px">
                            <apex:outputText value="{!bgTable.Total_Validation_Amount__c}(k€)" rendered="{!AND(NOT(ISNULL(bgTable.Total_Validation_Amount__c)),(bgTable.Total_Validation_Amount__c)>0)}"/>
                            <apex:outputText value="-" rendered="{!OR(ISNULL(bgTable.Total_Validation_Amount__c),(bgTable.Total_Validation_Amount__c)==0.0)}"/>             
                        </apex:column>
                        <apex:column headerValue=" Amount in Percentage" style="width:120px">
                            <apex:outputText value="{!bgTable.Total_Validation_Amount_percent__c}%" rendered="{!AND(NOT(ISNULL(bgTable.Total_Validation_Amount_percent__c)),(bgTable.Total_Validation_Amount_percent__c)>0)}"/>
                            <apex:outputText value="-" rendered="{!OR(ISNULL(bgTable.Total_Validation_Amount_percent__c),(bgTable.Total_Validation_Amount_percent__c)==0.0)}"/>             
                            <apex:variable var="bggRowNum" value="{!bggRowNum+1}"/>
                        </apex:column>
                        
                    </apex:pageBlockTable>                                                
                    <apex:commandButton id="Adddistribution" value="Add/Modify Benefit Distribution" action="{!mulBBGDistribution}" rendered="{!IF((($Profile.Name !='Nokia QIPP Project Viewer') && recIsLocked==false),true,false)}"/>
                    <!-- *********************************** -->
                    <!-- Popup Window For To Add BBG % Distribution -->
                    <apex:outputPanel id="popupBBG"> 
                        <apex:outputPanel id="popupBackground" styleClass="BBGpopupBackground" layout="block" rendered="{!displayPopupBBGDist}" />
                        <apex:outputPanel id="custPopup" styleClass="BBGcustPopup" layout="block" rendered="{!displayPopupBBGDist}" >
                            <apex:actionstatus id="actStatusId">
                                <apex:facet name="start">
                                    <div class="waitingSearchDiv" id="el_loading" style="background-color: #DCD6D6;
                                                                                         height: 1000px;opacity:0.65;width:1600px;"> 
                                        <div class="waitingHolder" style="top: 74.2px; width: 91px;">
                                            <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />
                                            <span class="waitingDescription"></span>
                                        </div>
                                    </div>
                                </apex:facet>
                            </apex:actionstatus>
                            
                            <apex:pagemessages id="bbgErrorblock" rendered="{!bbgErrorMessages}"/>
                            <apex:pageBlockSection id="mulBenefitingBusinessGrp" title="Benefit Distribution" collapsible="false"/>
                            <br></br>
                        <apex:outputText rendered="true"><b>Note: The validated achieved and future benefits (€) recorded in the project will be distributed to the following organization(s)</b></apex:outputText>
                        <br></br><br></br>
                <apex:variable var="mulBGDistRowNum" value="{!0}" />
                <apex:pageBlockTable value="{!projMultipleBBGDistAddList}" var="mulBGTable" id="pbTableMultipleBG" >
                    <apex:facet name="footer">
                        <apex:commandButton value="Add Row" action="{!addBGRowDist}" reRender="popupBBG,pbTableMultipleBG,bgGroupSection" rendered="true" status="actStatusId" oncomplete="bbgreadonly();"/>
                    </apex:facet>
                    <apex:column headerValue="No." style="width:20px; text-align:center;" headerClass="centertext">
                        <apex:outputText value="{0,number, ###}" style="text-align:center;">   
                            <apex:param value="{!mulBGDistRowNum+1}" />   
                        </apex:outputText>
                    </apex:column>
                    <apex:column id="BGheader" headerValue="Business Group" style="width:200px">
                        <apex:inputField id="EnterBG" value="{!mulBGTable.Benefitting_Business_Grp_Functional_Grp__c}" rendered="{!mulBGTable.Project_BG__c == false}" style="width:250px" onchange="GlobalBBG()"/>
                        <apex:outputText id="defaultbg" value="{!mulBGTable.Benefitting_Business_Grp_Functional_Grp__c}" rendered="{!mulBGTable.Project_BG__c == true}" />
                    </apex:column>
                    <apex:column headerValue="Business Unit" style="width:200px">
                        <apex:inputField id="EnterBU" value="{!mulBGTable.Benefitting_Business_Unit__c}" rendered="{!mulBGTable.Project_BG__c == false}" style="width:250px" />
                        <apex:outputText value="{!mulBGTable.Benefitting_Business_Unit__c}" rendered="{!mulBGTable.Project_BG__c == true}" />
                    </apex:column>
                    <apex:column headerValue="Business Line" style="width:200px">
                        <apex:inputField id="EnterBL" value="{!mulBGTable.Benefitting_Business_Line__c}" rendered="{!mulBGTable.Project_BG__c == false}" style="width:250px" />
                        <apex:outputText value="{!mulBGTable.Benefitting_Business_Line__c}" rendered="{!mulBGTable.Project_BG__c == true}" />
                    </apex:column>
                    <apex:column headerValue="Financial Val Amount(k€)" style="width:40px">
                        <apex:inputText id="BGfival" value="{!mulBGTable.Financial_Validation_Amount__c}" rendered="{!mulBGTable.Project_BG__c == false}" onchange="BBGFIValidationAmount()"  onkeypress="return isNumberKeyBBGfi(event)" styleClass="BBGFItotal"/>
                        <apex:inputText id="mainBGfival" value="{!mulBGTable.Financial_Validation_Amount__c}" rendered="{!mulBGTable.Project_BG__c == true}" style="border:none;" />
                    </apex:column>
                    <apex:column headerValue="Operational Val Amount(k€)" style="width:40px"> 
                        <apex:inputText id="BGopval" value="{!mulBGTable.Operational_Validation_Amount__c}" rendered="{!mulBGTable.Project_BG__c == false}"  onchange="BBGOPValidationAmount()"  onkeypress="return isNumberKeyBBGop(event)" styleClass="BBGOPtotal" />
                        <apex:inputText id="mainBGopval" value="{!mulBGTable.Operational_Validation_Amount__c}" rendered="{!mulBGTable.Project_BG__c == true}" style="border:none;" />
                    </apex:column>
                    
                    <apex:column headerValue="Projected Val Amount(k€)" style="width:40px">
                        <apex:inputText id="BGpoval" value="{!mulBGTable.Projected_Validation_Amount__c}" rendered="{!mulBGTable.Project_BG__c == false}" onchange="BBGPOValidationAmount()"  onkeypress="return isNumberKeyBBGproj(event)" styleClass="BBGPOtotal" />
                        <apex:inputText id="mainBGprojval" value="{!mulBGTable.Projected_Validation_Amount__c}" rendered="{!mulBGTable.Project_BG__c == true}" style="border:none;" />
                    </apex:column>
                    <apex:column headerValue="Realized Val Amount(k€)" style="width:40px">
                        <apex:inputText id="BGrlval" value="{!mulBGTable.Realized_Validation_Amount__c}" rendered="{!mulBGTable.Project_BG__c == false}" onchange="BBGREValidationAmount()"  onkeypress="return isNumberKeyBBGrel(event)" styleClass="BBGREtotal"/>
                        <apex:inputText id="mainBGrealval" value="{!mulBGTable.Realized_Validation_Amount__c}" rendered="{!mulBGTable.Project_BG__c == true}" style="border:none;" />
                    </apex:column> 
                    <!--  <apex:column headerValue="% Distribution" style="width:120px">
<div class="input-icon">
<apex:inputField id="mainBG1" html-placeholder="Enter Value"  value="{!mulBGTable.Distribution__c}" rendered="{!mulBGTable.Project_BG__c == false}" onchange="sumBBG()" styleClass="BBGtotal" /> 
<i>%</i>
<apex:inputField id="mainBGdefault"  rendered="{!mulBGTable.Project_BG__c == true}"  value=" {!mulBGTable.Distribution__c}" style="border:none;width:60px"> &nbsp; &nbsp; &nbsp; &nbsp; </apex:inputField>   
</div>
</apex:column>-->
                    <apex:column headerValue="Delete" style="width:30px" >
                        <apex:commandLink style="font-size:15px; font-weight:bold; text-align:center;color:red;" value="X" action="{!delBGRowDist}" rendered="{!mulBGTable.Project_BG__c == false}" rerender="popupBBG,pbTableMultipleBG,bgGroupSection" onclick="if (! confirm('Do you want to delete the Business Group from the Project?\r\nOnce the Business Group is deleted, the % Distribution value will be added to the default Business Group.')) return false" oncomplete="BBGOPValidationAmount();BBGFIValidationAmount();BBGPOValidationAmount();BBGREValidationAmount();GlobalBBG();" status="actStatusId" >
                            <apex:param value="{!mulBGDistRowNum}" name="index"/>
                        </apex:commandLink>
                        <apex:variable var="mulBGDistRowNum" value="{!mulBGDistRowNum+1}"/>
                    </apex:column> 
                </apex:pageBlockTable>
                <div align="center" draggable="false" >
                    <!--<apex:commandButton value="Save & Close" action="{!saveMulBBG}" onclick="if (!confirm('If Benefits Added/Modified in the Benefit Section after Benefitting Distribution,then all the added Benefitting Businesss Groups will be deleted other than Default Benefitting Group.Please Make sure Benefits are freezed and add Benefit Distribution to the project.')) return false"/>-->
                    <apex:commandButton id="saveBBG" value="Save & Close" style="margin-left:100px" onclick=" saveBBG();" oncomplete="saveBBGval();"/>
                    <apex:actionFunction name="doSave" action="{!saveMulBBG}" />
                    <apex:commandButton value="Close" action="{!closePopupBBGDist}" />
                </div>
                
                <div id="BBGInstruction" align="left" draggable="false" style="margin-top:10px;margin-left:10px;">
                    <span><b>Instructions:</b></span><br/>
                    <apex:outputLabel > 1) The first row is the Default Row displays the Business Group, Business Unit, and Business Line that were entered when the project was created.  By default, 100% of the Benefit Savings is assigned to this row.</apex:outputLabel><br/>
                    <apex:outputLabel >2) Click on Add Row to add a New BG/BU/BL and enter the expected Benefit Savings in the appropriate fields. The Benefit Savings amounts.</apex:outputLabel><br/>
                    <apex:outputLabel >3) Click on the Delete symbol “X” to delete a BG/BU/BL row. The amounts in the deleted row will be added automatically to the Default Row.</apex:outputLabel><br/>
                    <apex:outputLabel >4) “0.1” is the Minimum value accepted for any Amount.</apex:outputLabel><br/>
                    <apex:outputLabel > 5) 20 is the Maximum number of BG/BU/BL rows allowed.</apex:outputLabel><br/>
                </div>
                
            </apex:outputPanel>  
</apex:outputPanel>
</apex:pageBlockSection>


<!-- BBG % Distribution ** End ** -->

<!-- BBG % Distribution ** End ** -->

<!-- End of Benefit creation section --> 

<!-- Project Re-Deployed Section Starts Here-->


    <apex:pageblockSection id="projredeplySec" title="Project Re-Deployment Section" columns="1" collapsible="false" >
          <!-- <apex:outputText> {!$Label.Redepoyment_Description}</apex:outputText>-->
           
           <apex:outputText escape="false" value="{!$Label.Redepoyment_Description}" />
       </apex:pageBlockSection>
    <apex:pageblockSection id="projredeplySec1"  columns="2" collapsible="false" >
        
        <apex:pageBlockSectionItem id="projredep" helpText="{!$ObjectType.QIPP_Project__c.fields.Can_Project_Redeployed__c.inlineHelpText}" rendered="{!IF((projectrec.Can_Project_Redeployed__c!=null),true,false)}">
            <apex:outputLabel value="Redeployment Opportunity" for="projredeployed"/>
            <apex:outputText id="projredeployed" value="{!projectrec.Can_Project_Redeployed__c}"/>
        </apex:pageBlockSectionItem>
        
        <apex:pageBlockSectionItem id="projredepDesc" helpText="{!$ObjectType.QIPP_Project__c.fields.Project_Redeloy_Description__c.inlineHelpText}" rendered="{!IF((projectrec.Can_Project_Redeployed__c=='Yes'),true,false)}">
            <apex:outputLabel value="Project Redeployment Description :" for="projectDesc"/>
            <apex:outputText id="projredepDesc" value="{!projectrec.Project_Redeloy_Description__c}" style="word-break:break-all"/>
        </apex:pageBlockSectionItem> 
        
    </apex:pageBlockSection>
    
    <!--<apex:pageBlockSection id="projredeploydetail" title="Project Redeployed Benfitting Business Group" collapsible="false"  rendered="{!IF(((Benefits_RelatedList!=null && Benefits_RelatedList.size>0) && (benefitAmount > 0)),true,false)}"/>-->
    <!--<apex:pageBlockSection columns="1" id="projredeploySection" collapsible="false" rendered="{!IF(((Benefits_RelatedList!=null && Benefits_RelatedList.size>0) && (benefitAmount > 0)),true,false)}">-->
    <apex:variable var="projredepRowNum" value="{!0}" />
    <!--BBG % Distribution Table on Project view -->
    <!-- <apex:outputText rendered="{!IF((projectbbglist!=null && projectbbglist.size>0),true,false)}"><b>Note: The validated achieved and future benefits (€) recorded in the project will be distributed to the following organization(s)</b></apex:outputText>-->
    <apex:pageBlockTable value="{!projectredeplist}" var="bgTable" id="pbTableredep" rendered="{!IF((projectrec.Can_Project_Redeployed__c=='Yes'),true,false)}">
        <apex:column headerValue="No." style="width:20px; text-align:center;" headerClass="centertext">
            <apex:outputText value="{0,number, ###}" style="text-align:center;">   
                <apex:param value="{!projredepRowNum+1}" />   
            </apex:outputText>
            <apex:variable var="projredepRowNum" value="{!projredepRowNum+1}"/>
        </apex:column>
        <apex:column headerValue="Business Group" style="width:120px">
            <apex:outputField value="{!bgTable.Benefitting_Business_Grp_Functional_Grp__c}" rendered="true">
                <apex:inlineEditSupport rendered="false"/>
            </apex:outputField>
        </apex:column>
        <apex:column headerValue="Business Unit" style="width:120px">
            <apex:outputField value="{!bgTable.Benefitting_Business_Unit__c}" rendered="true">
                <apex:inlineEditSupport rendered="false"/>
            </apex:outputField>
        </apex:column>
    </apex:pageBlockTable>
     <apex:inputHidden id="oldprojredep" value="{!projectrec.Can_Project_Redeployed__c}"/>
    <apex:commandButton id="addprojredeploy" value="Add/Edit Redeployment Details" action="{!projredepDistribution}" rendered="{!IF((($Profile.Name !='Nokia QIPP Project Viewer') && recIsLocked==false),true,false)}"/>
    
    
    
    <apex:outputPanel id="popupprojredep"> 
        <apex:outputPanel styleClass="BenfpopupBackground" layout="block" rendered="{!displayPopupprojredepDist}" />
        <apex:outputPanel styleClass="BenfcustPopup" layout="block" rendered="{!displayPopupprojredepDist}" >
            <apex:actionstatus id="actStatusId11">
                <apex:facet name="start">
                    <div class="waitingSearchDiv" id="el_loading" style="background-color: #DCD6D6;height: 1000px;opacity:0.65;width:1600px;"> 
                        <div class="waitingHolder" style="top: 74.2px; width: 91px;">
                            <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />
                            <span class="waitingDescription"> </span>
                        </div>
                    </div>
                </apex:facet>
            </apex:actionstatus> 
            
            <apex:pagemessages id="predepErrorblock"/>
            <apex:pageBlockSection id="projredeploysection" title="Project Redployement Section" collapsible="false"/>
            <br></br>
        <apex:pageBlockSection id="radiobtn">
            <apex:pageBlockSectionItem id="projredep" helpText="{!$ObjectType.QIPP_Project__c.fields.Can_Project_Redeployed__c.inlineHelpText}">
                <!--  <apex:outputLabel value="{!$ObjectType.Project_Redeployed__c.fields.Can_Project_Redeployed__c.Label}" for="projredeployed"/>-->
                <apex:outputLabel value="Redeployment Opportunity" for="projredeployed"/>
                <apex:selectRadio id="projredeployed" value="{!projectrec.Can_Project_Redeployed__c}" style="margin-top: -5px;margin-left:-15px;position:absolute;" onclick="boolFunction(this);" onkeypress=" return preventEnterKey(event)">
                    <apex:selectOptions value="{!ProjectredepValues}"/>
                </apex:selectRadio>                   
            </apex:pageBlockSectionItem>
        </apex:pageBlockSection>
        <span id="idSpan" style = "display:none">
            
            <br/>
            
            
             <apex:pageBlockSection >
                <apex:pageBlockSectionItem id="ProjectredepDec" helpText="{!$ObjectType.QIPP_Project__c.Fields.Project_Redeloy_Description__c.inlineHelpText}" >
                    <apex:outputLabel id="ProjredepDecs" value="{!$ObjectType.QIPP_Project__c.fields.Project_Redeloy_Description__c.Label}" for="ProjectredepDec" style="display: inline-block;width: 155px;"/>
                    <apex:outputPanel styleClass="requiredInput" layout="block">
                        <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                        <apex:inputField id="projredepdesc" value="{!projectrec.Project_Redeloy_Description__c}"  style="width: 590px; height: 60px;margin-right: -200px;"/><br/><apex:outputText id="error" value="{!GenericError}" rendered="{!LEN(ProjDescError)>0}" style="color:#d74c3b"/>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
            
            
            
            <apex:variable var="projredepRowNum" value="{!0}" />
            
            <apex:pageBlockTable value="{!projredepAddList}" var="mulprdTable" id="pbTableProjredep" >
                
                <apex:facet name="footer">
                    <apex:commandButton value="Add the group/unit where redeployment is possible" action="{!addRedepRowDist}"  rendered="true" status="actStatusId11" title="Please click to add identified business groups and business units where this project can be redeployed" />
                </apex:facet>
                
                <apex:column headerValue="No." style="width:20px; text-align:center;" headerClass="centertext">
                    <apex:outputText value="{0,number, ###}" style="text-align:center;">   
                        <apex:param value="{!projredepRowNum+1}" />   
                    </apex:outputText>
                </apex:column>
                
                <apex:column headerValue="Business Group" style="width:120px"> 
                    <apex:inputField value="{!mulprdTable.Benefitting_Business_Grp_Functional_Grp__c}" />
                    
                </apex:column>
                <apex:column headerValue="Business Unit" style="width:120px">
                    <apex:inputField value="{!mulprdTable.Benefitting_Business_Unit__c}" /> 
                    
                </apex:column>
                
                <apex:column headerValue="Delete" style="width:20px" >
                    <apex:commandLink style="font-size:15px; font-weight:bold; text-align:center;color:red;" value="X" action="{!delRedepRowDist}"  onclick="if (! confirm('Do you want to delete the Business Group from the Project?')) return false"  status="actStatusId11" >
                        <apex:param value="{!projredepRowNum}" name="index" assignTo="{!index}"/> 
                    </apex:commandLink>
                    <apex:variable var="projredepRowNum" value="{!projredepRowNum+1}"/>
                </apex:column> 
            </apex:pageBlockTable>
         
        </span>    
        
        <div align="center" draggable="false" >
            <!-- <apex:commandButton id="saveBBG" value="Save & Close"  action="{!saveMulBBG}" onclick="if (!confirm('If Benefits Added/Modified in the Benefit Section after Benefitting Distribution,then all the added Benefitting Businesss Groups will be deleted other than Default Benefitting Group.Please Make sure Benefits are freezed and add Benefit Distribution to the project.')) return false"/>-->
            <!--<apex:commandButton id="saveredep1" value="Save & Close" style="margin-left:100px" action="{!saveProjredep}"/>-->
             <apex:commandButton id="saveredep1" value="Save & Close" style="margin-left:100px" onclick="saveprojredep();" oncomplete="saveprojredepval();"/>
            <apex:actionFunction name="doSaveredep" action="{!saveProjredep}" />
           <apex:commandButton value="Cancel" action="{!closePopupredepDist}"/>
        </div>
        
          <div id="predepInstruction" align="left" draggable="false" style="margin-top:10px;margin-left:8px;">
            <span><b>Instructions:</b></span><br/>
            <apex:outputLabel >1) Click on Add BG/BU  to add business groups / business units where this project is recommended to be redeployed/reused.</apex:outputLabel><br/>
            <apex:outputLabel >2) Click on the Delete symbol “X” to delete a BG/BU row.</apex:outputLabel><br/>
            <apex:outputLabel >3) 20 is the Maximum number of BG/BU rows allowed.</apex:outputLabel><br/>
        </div>
        </apex:outputPanel> 
    
    </apex:outputPanel>
          


</apex:pageBlock> 

<apex:outputPanel >
    <apex:outputPanel id="approvepopup">
        <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!displayPopUp}"/>
        <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!displayPopUp}">
            Are you sure you want to submit this project for Phase Completion Approval? Once the approval process is initiated, you will not be able to make any changes to this project records until its completed.<br/><br/><br/>
            <div align="center" draggable="false" >
                <apex:commandButton id="Approve" value="Submit" action="{!submitapprove}"  rerender="approvepopup,ProcessSteps,errorblock,lockIcon"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <apex:commandButton id="Cancel" value="Cancel" action="{!closePopup}" rerender="approvepopup"/>
            </div>
        </apex:outputPanel>
    </apex:outputPanel>
</apex:outputPanel> 
<apex:outputPanel id="delpopup">
    <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!displaydelPopUp}"/>
    <apex:outputPanel styleClass="custPopup2" layout="block" rendered="{!displaydelPopUp}">
        Are you sure?<br/><br/><br/>
        <apex:commandButton id="deleteprj" value="Delete" action="{!deleteprj}"  rerender="delpopup"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <apex:commandButton id="Cancelprj" value="Cancel" action="{!closedelPopup}" rerender="delpopup"/>              
    </apex:outputPanel>
</apex:outputPanel>

<!--
<apex:outputPanel >
    <apex:outputPanel id="skipapproval">
        <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!IF((proj.BGMBB_Rejected__c==True),true,false)}"/>
        <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!IF((proj.BGMBB_Rejected__c==True),true,false)}">
            Do you want to skip Project Mentor Approval in Re-approval process ? <br/><br/><br/>
            <div align="center" draggable="false" >
                <apex:commandButton id="skipApprove" value="Yes" action="{!submitapprove}" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <apex:commandButton id="skipCancel" value="No" action="{!closePopup}" />
            </div>
        </apex:outputPanel>
    </apex:outputPanel>
</apex:outputPanel> -->


<apex:outputPanel id="skipapprovalpopup">
    <apex:outputPanel id="skipapproval" styleClass="BenfpopupBackground" layout="block" rendered="{!IF((proj.BGMBB_Rejected__c==True),true,false)}" />
    <apex:outputPanel styleClass="LeadSponsorEqualPopup" layout="block" rendered="{!IF((proj.BGMBB_Rejected__c==True),true,false)}">
     Do you want to skip Project Mentor Approval in Re-approval process ? <br/><br/><br/>
    <div style="text-align:center;margin-top: 8px;">
    <apex:commandButton id="skipApprove" value="OK" action="{!approveskipapprovalPopup}" reRender="errorblock"/>    
    <apex:commandButton id="skipCancel" value="Cancel" action="{!closeskipapprovalPopup}"/>
                                </div>             
                            </apex:outputPanel>
                       </apex:outputPanel>

</apex:form>


<apex:relatedList id="ProcessSteps" list="ProcessSteps"/>
<apex:relatedList id="relatedtasks" list="Tasks__r" />
<apex:relatedList id="notesandattach" subject="{!proj}" list="CombinedAttachments" />
<c:GenericHistoryComponent_Reuse id="projecthistory" recordLimit1="10" myObject1="{!proj}"/>

<!-- Return to Top -->
<a href="javascript:" id="return-to-top"><i class="icon-chevron-up"></i></a>
<!-- ICON NEEDS FONT AWESOME FOR CHEVRON UP ICON -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css" media="all" rel="stylesheet" type="text/css"/>

</apex:page>